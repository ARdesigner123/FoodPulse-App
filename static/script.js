const translations = {
    en: {
        menuTitle: "Food Court Menu",
        chinese: "Chinese",
        malay: "Malay",
        korean: "Korean",
        western: "Western",
        japanese: "Japanese",
        desserts: "Desserts",
        drinks: "Drinks",
        fruits: "Fruits",
        scheduleBtn: "Academic Schedule",
        trackerBtn: "Food Tracker",
        closingHourBtn: "Closing-Hour Discount",
        langLabel: "Language",
        crowdLevelLegend: "Crowd Level Legend",
        low: "Low",
        medium: "Medium",
        high: "High",
        weekend: "Weekend",
        days: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"],
        pickFoodcourt: "Pick Your Foodcourt",
        salesAvailable: "Sales Available",
        timePeriod: "Time Period",
        time1: "8am-10am",
        time2: "10am-12pm",
        time3: "12pm-3pm",
        time4: "3pm-5pm",
        time5: "5pm-7pm",
        chineseMenuTitle: "Chinese Food Menu",
        gpsTitle: "GPS Map of Singapore Polytechnic",
        gpsHint: "Tap a Food Court button to view its location",
        foodCourts: {
            fc1: "Food Court 1",
            fc2: "Food Court 2",
            fc3: "Food Court 3",
            fc4: "Food Court 4",
            fc5: "Food Court 5",
            fc6: "Food Court 6"
        },
        foodCourtNames: {
            "Food Court 1": "Food Court 1",
            "Food Court 2": "Food Court 2",
            "Food Court 3": "Food Court 3",
            "Food Court 4": "Food Court 4",
            "Food Court 5": "Food Court 5",
            "Food Court 6": "Food Court 6"
        },
        stallNames: {
            "Chicken Rice": "Chicken Rice",
            "Japanese Curry / Rice Bowls": "Japanese Curry / Rice Bowls",
            "Western Cuisine": "Western Cuisine",
            "Ban Mian / Fish Soup": "Ban Mian / Fish Soup",
            "Mala Hotpot": "Mala Hotpot",
            "Thai Cuisine": "Thai Cuisine",
            "Yong Tau Foo": "Yong Tau Foo",
            "Desserts": "Desserts",
            "Drinks & Toast Stall": "Drinks & Toast Stall"
        },
        stalls: {
            "fc1-ban-mian-fish-soup": "Ban Mian / Fish Soup (FC1)",
            "fc1-economy-rice": "Economy Rice / Cai Png (FC1)",
            "fc2-economy-rice": "Economy Rice / Cai Png (FC2)",
            "fc3-chinese-cuisine": "Chinese Cuisine Stall (FC3)",
            "fc3-sp-mini-wok": "SP Mini Wok (FC3)",
            "fc4-taiwanese-chinese": "Taiwanese / Chinese-style Stall (FC4)",
            "fc4-happiness-sunbo": "Happiness Sunbo Chicken Rice (FC4)",
            "fc6-noodle-chinese": "Chinese-style Noodle Options (FC6)"
        },
        foodTrackerTitle: "Food Tracker"  // Added for page title
    },
    zh: {
        menuTitle: "美食广场菜单",
        chinese: "中餐",
        malay: "马来餐",
        western: "西餐",
        korean: "韩餐",
        japanese: "日餐",
        desserts: "甜点",
        drinks: "饮料",
        fruits: "水果",
        scheduleBtn: "学术日程",
        trackerBtn: "食物追踪器",
        closingHourBtn: "临近下班时段折扣",
        langLabel: "语言",
        crowdLevelLegend: "人群水平图例",
        low: "低",
        medium: "中",
        high: "高",
        weekend: "周末",
        days: ["日", "一", "二", "三", "四", "五", "六"],
        pickFoodcourt: "选择您的食阁",
        salesAvailable: "可用销售",
        timePeriod: "时间段",
        time1: "上午8点-10点",
        time2: "上午10点-12点",
        time3: "中午12点-3点",
        time4: "下午3点-5点",
        time5: "下午5点-7点",
        chineseMenuTitle: "中式美食菜单",
        gpsTitle: "新加坡理工学院 GPS 地图",
        gpsHint: "点击食阁按钮查看位置",
        foodCourts: {
            fc1: "食阁 1",
            fc2: "食阁 2",
            fc3: "食阁 3",
            fc4: "食阁 4",
            fc6: "食阁 6"
        },
        foodCourtNames: {
            "Food Court 1": "食阁 1",
            "Food Court 2": "食阁 2",
            "Food Court 3": "食阁 3",
            "Food Court 4": "食阁 4",
            "Food Court 5": "食阁 5",
            "Food Court 6": "食阁 6"
        },
        stallNames: {
            "Chicken Rice": "鸡饭",
            "Japanese Curry / Rice Bowls": "日式咖喱/饭碗",
            "Western Cuisine": "西式美食",
            "Ban Mian / Fish Soup": "板面/鱼汤",
            "Mala Xiang Guo": "麻辣香锅",
            "Thai Cuisine": "泰式美食",
            "Yong Tau Foo": "酿豆腐",
            "Desserts": "甜点",
            "Drinks & Toast Stall": "饮料和烤面包摊位"
        },
        stalls: {
            "fc1-ban-mian-fish-soup": "板面 / 鱼汤摊位 (食阁1)",
            "fc1-economy-rice": "经济饭 / 菜饭 (食阁1)",
            "fc2-economy-rice": "经济饭 / 菜饭 (食阁2)",
            "fc3-chinese-cuisine": "中式美食摊位 (食阁3)",
            "fc3-sp-mini-wok": "SP 小炒 (食阁3)",
            "fc4-taiwanese-chinese": "台湾 / 中式摊位 (食阁4)",
            "fc4-happiness-sunbo": "幸福顺宝鸡饭 (食阁4)",
            "fc6-noodle-chinese": "中式面条选项 (食阁6)"
        },
        foodTrackerTitle: "食物追踪器"  // Added translation
    },
    ta: {
        menuTitle: "உணவு நிலைய மெனு",
        chinese: "சீன உணவு",
        malay: "மலாய் உணவு",
        western: "மேற்கத்திய உணவு",
        korean: "கொரியன் உணவு",
        japanese: "ஜப்பானிய உணவு",
        desserts: "இனிப்புகள்",
        drinks: "பானங்கள்",
        fruits: "பழங்கள்",
        scheduleBtn: "கல்வி அட்டவணை",
        trackerBtn: "உணவு கண்காணிப்பாளர்",
        closingHourBtn: "இறுதி நேர தள்ளுபடி",
        langLabel: "மொழி",
        crowdLevelLegend: "கூட்ட நிலை சின்னம்",
        low: "குறைவு",
        medium: "நடுத்தர",
        high: "அதிக",
        weekend: "வார இறுதி",
        days: ["ஞா", "தி", "செ", "பு", "வி", "வெ", "ச"],
        pickFoodcourt: "உங்கள் உணவகத்தைத் தேர்ந்தெடுக்கவும்",
        salesAvailable: "கிடைக்கும் விற்பனை",
        timePeriod: "நேர காலம்",
        time1: "காலை 8 மணி-10 மணி",
        time2: "காலை 10 மணி-12 மணி",
        time3: "மதியம் 12 மணி-3 மணி",
        time4: "மாலை 3 மணி-5 மணி",
        time5: "மாலை 5 மணி-7 மணி",
        chineseMenuTitle: "சீன உணவு மெனு",
        gpsTitle: "சிங்கப்பூர் பாலிடெக்னிக் GPS வரைபடம்",
        gpsHint: "இடத்தை பார்க்க உணவக பொத்தானை அழுத்தவும்",
        foodCourts: {
            fc1: "உணவகம் 1",
            fc2: "உணவகம் 2",
            fc3: "உணவகம் 3",
            fc4: "உணவகம் 4",
            fc6: "உணவகம் 6"
        },
        foodCourtNames: {
            "Food Court 1": "உணவகம் 1",
            "Food Court 2": "உணவகம் 2",
            "Food Court 3": "உணவகம் 3",
            "Food Court 4": "உணவகம் 4",
            "Food Court 5": "உணவகம் 5",
            "Food Court 6": "உணவகம் 6"
        },
        stallNames: {
    "Chicken Rice": "கோழி சாதம்",
    "Japanese Curry / Rice Bowls": "ஜப்பானிய கறி / சாதம் பவுல்கள்",
    "Western Cuisine": "மேற்கத்திய சமையல்",
    "Ban Mian / Fish Soup": "பான் மியான் / மீன் சூப்",
    "Mala Xiang Guo": "மாலா சியாங் கோ",
    "Thai Cuisine": "தை உணவு",
    "Yong Tau Foo": "யோங் டாவ் ஃபூ",
    "Desserts": "இனிப்புகள்",
    "Drinks & Toast Stall": "பானங்கள் மற்றும் டோஸ்ட் கடை",
    // Add any other stalls from fcData if needed, e.g., for other food courts
    "Vegetarian Stall": "சைவ கடை",
    "Indonesian Express": "இந்தோனேசியன் எக்ஸ்பிரஸ்",
    "Japanese Stall": "ஜப்பானிய கடை",
    "Korean Stall": "கொரியன் கடை",
    "Economic Rice (Cai Fan)": "பொருளாதார அரிசி (காய் ஃபான்)",
    "Malay / Indian Cuisine": "மலாய் / இந்திய உணவு",
    "SP Mini Wok": "SP மினி வோக்",
    "Waffle Street": "வாஃபிள் ஸ்ட்ரீட்",
    "Mr Pasta": "மிஸ்டர் பாஸ்தா",
    "Crumbz Up": "க்ரம்ப்ஸ் அப்",
    "Mala Xiang Guo": "மாலா சியாங் கோ",  // Already above
    "Chinese Cuisine": "சீன உணவு",
    "The Crowded Bowl": "கூட்டமான பவுல்",
    "Nasi Lemak / Chicken Rice": "நாசி லெமாக் / கோழி சாதம்",
    "Taiwanese Cuisine": "தைவானிய உணவு",
    "Western Food": "மேற்கத்திய உணவு",
    "Japanese & Korean Cuisine": "ஜப்பானிய மற்றும் கொரியன் உணவு",
    "Pao Fan / Seafood Rice": "பாவ் ஃபான் / கடல் உணவு சாதம்",
    "Waffle & Snack Store": "வாஃபிள் மற்றும் ஸ்னாக் ஸ்டோர்",
    "Drinks & Breakfast Stall": "பானங்கள் மற்றும் காலை உணவு கடை",
    "Starbucks": "ஸ்டார்பக்ஸ்",
    "Subway": "சப்வே",
    "KFC": "கேஎஃப்சி",
    "Brunch Cafe": "பிரன்ச் கஃபே",
    "Bang Deli": "பாங் டெலி",
    "Fruit Stall": "பழ கடை",
    "Drinks Stall": "பானங்கள் கடை",
    "Creamy Duck": "க்ரீமி டக்",
    "Mixed Vegetable Rice": "கலந்த காய்கறி சாதம்"
},
stalls: {
    "fc1-ban-mian-fish-soup": "பான் மியான் / மீன் சூப் (உணவகம் 1)",
    "fc1-economy-rice": "பொருளாதார அரிசி / காய் பொங்க் (உணவகம் 1)",
    "fc2-economy-rice": "பொருளாதார அரிசி / காய் பொங்க் (உணவகம் 2)",
    "fc3-chinese-cuisine": "சீன உணவு கடை (உணவகம் 3)",
    "fc3-sp-mini-wok": "SP மினி வோக் (உணவகம் 3)",
    "fc4-taiwanese-chinese": "தைவானிய / சீன பாணி கடை (உணவகம் 4)",
    "fc4-happiness-sunbo": "ஹாப்பினஸ் சன்போ சிக்கன் ரைஸ் (உணவகம் 4)",
    "fc6-noodle-chinese": "சீன பாணி நூடுல் விருப்பங்கள் (உணவகம் 6)"
},
foodTrackerTitle: "உணவு கண்காணிப்பாளர்"  // Added translation
},
ms: {
menuTitle: "Menu Dewan Makan",
chinese: "Cina",
malay: "Melayu",
western: "Barat",
korean: "Korea",
japanese: "Jepun",
desserts: "Pencuci Mulut",
drinks: "Minuman",
fruits: "Buah-buahan",
scheduleBtn: "Jadual Akademik",
trackerBtn: "Penjejak Makanan",
closingHourBtn: "Diskaun Jam Tutup",
langLabel: "Bahasa",
crowdLevelLegend: "Tahap Kesesakan Legenda",
low: "Rendah",
medium: "Sederhana",
high: "Tinggi",
weekend: "Hujung Minggu",
days: ["Ahd", "Isn", "Sel", "Rab", "Kha", "Jum", "Sab"],
pickFoodcourt: "Pilih Dewan Makan Anda",
salesAvailable: "Jualan Tersedia",
timePeriod: "Tempoh Masa",
time1: "8 pagi-10 pagi",
time2: "10 pagi-12 tengah hari",
time3: "12 tengah hari-3 petang",
time4: "3 petang-5 petang",
time5: "5 petang-7 malam",
chineseMenuTitle: "Menu Makanan Cina",
gpsTitle: "Peta GPS Politeknik Singapura",
gpsHint: "Tekan butang dewan makan untuk melihat lokasi",
foodCourtNames: {
    "Food Court 1": "Dewan Makan 1",
    "Food Court 2": "Dewan Makan 2",
    "Food Court 3": "Dewan Makan 3",
    "Food Court 4": "Dewan Makan 4",
    "Food Court 5": "Dewan Makan 5",
    "Food Court 6": "Dewan Makan 6"
},
stallNames: {
    "Chicken Rice": "Nasi Ayam",
    "Japanese Curry / Rice Bowls": "Kari Jepun / Mangkuk Nasi",
    "Western Cuisine": "Makanan Barat",
    "Ban Mian / Fish Soup": "Ban Mian / Sup Ikan",
    "Mala Xiang Guo": "Mala Xiang Guo",
    "Thai Cuisine": "Masakan Thai",
    "Yong Tau Foo": "Yong Tau Foo",
    "Desserts": "Pencuci Mulut",
    "Drinks & Toast Stall": "Gerai Minuman & Roti Bakar",
    // Add any other stalls from fcData if needed
    "Vegetarian Stall": "Gerai Vegetarian",
    "Indonesian Express": "Indonesian Express",
    "Japanese Stall": "Gerai Jepun",
    "Korean Stall": "Gerai Korea",
    "Economic Rice (Cai Fan)": "Nasi Ekonomi (Cai Fan)",
    "Malay / Indian Cuisine": "Masakan Melayu / India",
    "SP Mini Wok": "SP Mini Wok",
    "Waffle Street": "Waffle Street",
    "Mr Pasta": "Mr Pasta",
    "Crumbz Up": "Crumbz Up",
    "Chinese Cuisine": "Masakan Cina",
    "The Crowded Bowl": "The Crowded Bowl",
    "Nasi Lemak / Chicken Rice": "Nasi Lemak / Nasi Ayam",
    "Taiwanese Cuisine": "Masakan Taiwan",
    "Western Food": "Makanan Barat",
    "Japanese & Korean Cuisine": "Masakan Jepun & Korea",
    "Pao Fan / Seafood Rice": "Pao Fan / Nasi Laut",
    "Waffle & Snack Store": "Gerai Wafel & Snek",
    "Drinks & Breakfast Stall": "Gerai Minuman & Sarapan",
    "Starbucks": "Starbucks",
    "Subway": "Subway",
    "KFC": "KFC",
    "Brunch Cafe": "Brunch Cafe",
    "Bang Deli": "Bang Deli",
    "Fruit Stall": "Gerai Buah",
    "Drinks Stall": "Gerai Minuman",
    "Creamy Duck": "Creamy Duck",
    "Mixed Vegetable Rice": "Nasi Sayur Campur"
},
foodCourts: {
    fc1: "Dewan Makan 1",
    fc2: "Dewan Makan 2",
    fc3: "Dewan Makan 3",
    fc4: "Dewan Makan 4",
    fc6: "Dewan Makan 6"
},
stalls: {
    "fc1-ban-mian-fish-soup": "Gerai Ban Mian / Sup Ikan (FC1)",
    "fc1-economy-rice": "Gerai Nasi Campur / Cai Png (FC1)",
    "fc2-economy-rice": "Gerai Nasi Campur / Cai Png (FC2)",
    "fc3-chinese-cuisine": "Gerai Masakan Cina (FC3)",
    "fc3-sp-mini-wok": "SP Mini Wok (FC3)",
    "fc4-taiwanese-chinese": "Gerai Taiwan / Cina (FC4)",
    "fc4-happiness-sunbo": "Happiness Sunbo Nasi Ayam (FC4)",
    "fc6-noodle-chinese": "Pilihan Mee Cina (FC6)"
},
foodTrackerTitle: "Penjejak Makanan"  // Added translation
}
};

// Data for Food Courts with translated descriptions
// Data for Food Courts with translated descriptions
const fcData = {
"Food Court 1": {
    stalls: ["Chicken Rice", "Japanese Curry / Rice Bowls", "Western Cuisine", "Ban Mian / Fish Soup", "Mala Hotpot", "Thai Cuisine", "Yong Tau Foo", "Desserts", "Drinks & Toast Stall"],
    descriptions: {
        en: ["A student staple", "Very popular", "Pastas, chicken chops", "", "", "Basil chicken, noodles", "", "Ice Kacang etc.", "Main anchor"],
        zh: ["学生主食", "非常受欢迎", "意大利面，鸡扒", "", "", "罗勒鸡，面条", "", "冰沙等等", "主要支柱"],
        ta: ["மாணவர் முதன்மை", "மிகவும் பிரபலமான", "பாஸ்தா, கோழி சாப்", "", "", "பேசில் கோழி, நூடுல்ஸ்", "", "ஐஸ் ககாங் முதலியன", "முதன்மை ஆங்கர்"],
        ms: ["Stap mahasiswa", "Sangat popular", "Pasta, ayam goreng", "", "", "Ayam basil, mi", "", "Ais kacang dll.", "Penambat utama"]
    },
    times: {
        "8am-10am": [60, 50, 40, 30, 20, 25, 20, 50, 70],
        "10am-12pm": [95, 90, 85, 80, 70, 75, 60, 90, 95],
        "12pm-3pm": [100, 95, 90, 85, 80, 75, 70, 95, 100],
        "3pm-5pm": [40, 30, 35, 25, 20, 30, 25, 40, 45],
        "5pm-7pm": [20, 15, 25, 10, 5, 15, 10, 20, 25]
    }
},
"Food Court 2": {
    stalls: ["Vegetarian Stall", "Indonesian Express", "Japanese Stall", "Korean Stall", "Economic Rice (Cai Fan)", "Yong Tau Foo", "Fish Soup / Ban Mian", "Taiwanese Stall", "Malay / Indian Cuisine", "Drinks & Toast Stall"],
    descriptions: {
        en: ["Highly rated, known for big portions", "Famous for Ayam Penyet/Ayam Panggang", "Known for affordable Chicken Don/Karaage Don", "Recommended for Hot Stone Bibimbap", "The budget staple", "Each ingredient priced around $0.40 - $0.50", "", "", "Known for Maggie Goreng", "Main anchor"],
        zh: ["评价很高，以大份量闻名", "以阿央佩妮特/阿央庞冈闻名", "以实惠的鸡扒饭/唐扬鸡闻名", "推荐热石拌饭", "预算主食", "每种配料价格约0.40-0.50美元", "", "", "以Maggie Goreng闻名", "主要支柱"],
        ta: ["உயர் மதிப்பீடு, பெரிய பங்குகளுக்கு அறியப்பட்ட", "அயம் பென்யட்/அயம் பாங்காங்கிற்கு பிரபலமான", "விலையில்லாத சிக்கன் டான்/கராஜ் டானுக்கு அறியப்பட்ட", "ஹாட் ஸ்டோன் பிபிம்பாப்பிற்கு பரிந்துரைக்கப்படுகிறது", "பட்ஜெட் ஸ்டேபிள்", "ஒவ்வொரு பொருளும் சுமார் $0.40 - $0.50 விலை", "", "", "மேகி கோரெங்கிற்கு அறியப்பட்ட", "முதன்மை ஆங்கர்"],
        ms: ["Penilaian tinggi, dikenali untuk bahagian besar", "Terkenal dengan Ayam Penyet/Ayam Panggang", "Dikenali untuk Chicken Don/Karaage Don yang mampu milik", "Disyorkan untuk Hot Stone Bibimbap", "Stap bajet", "Setiap bahan dihargakan sekitar $0.40 - $0.50", "", "", "Dikenali untuk Maggie Goreng", "Penambat utama"]
    },
    times: {
        "8am-10am": [50, 0, 0, 0, 40, 0, 30, 0, 20, 40],
        "10am-12pm": [100, 95, 90, 90, 95, 60, 80, 50, 80, 95],
        "12pm-3pm": [100, 80, 70, 70, 60, 50, 40, 30, 50, 80],
        "3pm-5pm": [20, 0, 0, 0, 10, 5, 0, 0, 0, 15],
        "5pm-7pm": [10, 0, 0, 0, 0, 0, 0, 0, 0, 5]
    }
},
"Food Court 3": {
    stalls: ["Indonesian Express","SP Mini Wok","Waffle Street","Mr Pasta","Crumbz Up","Mala Xiang Guo","Chinese Cuisine","The Crowded Bowl","Nasi Lemak / Chicken Rice","Drinks & Toast Stall", "Turkish & Mediterranean Kebab"],
    descriptions: {
        en: ["Famous for Ayam Penyet and spicy chili","Salted Egg Chicken Rice, Mala Chicken Rice","Large, crispy waffles with various toppings/ice cream","Customizable cream and tomato-based pastas","Acai bowls and healthy granola treats","A student favorite with manageable queues","Known for Jiao Zi / pan-fried dumplings","Vegetarian salad bowls","Halal-certified options available","Known for large Ice Milo and breakfast sets", "Authentic kebabs, wraps, and Mediterranean rice sets"],
        zh: ["以阿央佩妮特和辣椒闻名","咸蛋鸡饭，麻辣鸡饭","大而脆的华夫饼配各种配料/冰淇淋","可定制的奶油和番茄酱意大利面","阿萨伊碗和健康格兰诺拉零食","学生最爱，队伍可管理","以饺子/煎饺闻名","素食沙拉碗","提供清真认证选项","以大冰米洛和早餐套餐闻名", "正宗土耳其烤肉、卷饼和地中海饭食"],
        ta: ["அயம் பென்யட் மற்றும் மசாலா சிலிக்கு பிரபலமான","உப்பு முட்டை கோழி சாதம், மாலா கோழி சாதம்","பல்வேறு டாப்பிங்ஸ்/ஐஸ் க்ரீமுடன் பெரிய, க்ரிஸ்பி வாஃபிள்ஸ்","தனிப்பயன் க்ரீம் மற்றும் டோமேட்டோ அடிப்படையிலான பாஸ்தாக்கள்","அசாய் பவுல்ஸ் மற்றும் ஆரோக்கியமான கிரானோலா ட்ரீட்ஸ்","மாணவர்களின் பிடித்த, நிர்வகிக்கக்கூடிய வரிசைகள்","ஜியோ சி / பான்-ஃப்ரைட் டம்ப்லிங்ஸுக்கு அறியப்பட்ட","சைவ சாலட் பவுல்ஸ்","ஹலால் சான்றிதழ் விருப்பங்கள் கிடைக்கின்றன","பெரிய ஐஸ் მிலோ மற்றும் பிரேக்ஃபாஸ்ட் செட்களுக்கு அறியப்பட்ட", "அசல் கபாப், ரேப் மற்றும் மெடிட்டரேனியன் சாத வகைகள்"],
        ms: ["Terkenal dengan Ayam Penyet dan cili pedas","Nasi Ayam Telur Masin, Nasi Ayam Mala","Wafel besar, rangup dengan pelbagai topping/ais krim","Pasta krim dan tomato yang boleh disesuaikan","Mangkuk Acai dan rawatan granola sihat","Kegemaran pelajar dengan barisan boleh diurus","Dikenali untuk Jiao Zi / dumpling goreng","Mangkuk salad vegetarian","Pilihan halal tersedia","Dikenali untuk Ice Milo besar dan set sarapan", "Kebab asli, wrap, dan set nasi Mediterranean"]
    },
    times: {
        "8am-10am": [60, 30, 60, 0, 0, 0, 20, 0, 50, 70, 20], 
        "10am-12pm": [95, 90, 80, 85, 80, 70, 60, 50, 80, 95, 90],
        "12pm-3pm": [100, 100, 90, 85, 80, 75, 70, 60, 95, 100, 100],
        "3pm-5pm": [50, 40, 60, 30, 50, 40, 20, 30, 40, 50, 60],
        "5pm-7pm": [30, 25, 40, 20, 25, 30, 10, 20, 30, 35, 40]
    }
},
"Food Court 4": {
    stalls: ["Mala Xiang Guo","Taiwanese Cuisine","Western Food","Japanese & Korean Cuisine","Ban Mian & Fish Soup","Yong Tau Foo","Nasi Padang / Malay Cuisine","Pao Fan / Seafood Rice","Waffle & Snack Store","Drinks & Breakfast Stall"],
    descriptions: {
        en: ["Highly popular, often considered one of the best in SP","Famous for Chicken Cutlet and Braised Pork Rice","Generous portions of Chicken Chop and Pasta","Known for Rice Bowls and Bulgogi Beef","A student favorite for a $3.50 budget meal","Large variety of fresh ingredients","Wide selection of spicy side dishes","Specialized broth-based rice dishes","Famous for large waffles and ice cream","Stays open the longest, often until 9:00 PM"],
        zh: ["非常受欢迎, 通常被认为是SP最好的之一","以鸡排和卤肉饭闻名","鸡扒和意大利面的慷慨份量","以饭碗和烤牛肉闻名","学生最爱，3.50美元预算餐","新鲜配料的多种选择","辣味配菜的广泛选择","专业汤底饭菜","以大华夫饼和冰淇淋闻名","营业时间最长，通常到晚上9:00"],
        ta: ["SP இல் சிறந்தவற்றில் ஒன்றாக அடிக்கடி கருதப்படும் மிகவும் பிரபலமான","கோழி கட்லெட் மற்றும் பிரேஸ்ட் போர்க் ரைஸுக்கு பிரபலமான","கோழி சாப் மற்றும் பாஸ்தாவின் தாராளமான பங்குகள்","ரைஸ் பவுல்ஸ் மற்றும் புல்கோகி பீஃபுக்கு அறியப்பட்ட","$3.50 பட்ஜெட் உணவுக்கு மாணவர் பிடித்த","புதிய பொருட்களின் பெரிய வகை","மசாலா பக்க உணவுகளின் பரந்த தேர்வு","சிறப்பு புரோத் அடிப்படையிலான ரைஸ் உணவுகள்","பெரிய வாஃபிள்ஸ் மற்றும் ஐஸ் க்ரீமுக்கு பிரபலமான","பெரும்பாலும் மாலை 9:00 வரை திறந்திருக்கும்"],
        ms: ["Sangat popular, sering dianggap salah satu yang terbaik di SP","Terkenal dengan Chicken Cutlet dan Braised Pork Rice","Bahagian besar Chicken Chop dan Pasta","Dikenali untuk Rice Bowls dan Bulgogi Beef","Kegemaran pelajar untuk hidangan bajet $3.50","Pelbagai bahan segar yang besar","Pilihan luas hidangan sampingan pedas","Hidangan nasi berasaskan kuah khusus","Terkenal dengan wafel besar dan ais krim","Buka paling lama, sering hingga 9:00 PM"]
    },
    times: {
        "8am-10am": [50, 40, 30, 20, 50, 40, 30, 20, 50, 60],
        "10am-12pm": [100, 100, 100, 100, 100, 100, 100, 100, 100, 100],
        "12pm-3pm": [100, 95, 90, 85, 80, 75, 80, 70, 90, 100],
        "3pm-5pm": [60, 50, 40, 40, 50, 50, 50, 40, 50, 60],
        "5pm-7pm": [40, 35, 30, 30, 35, 35, 30, 25, 35, 50]
    }
},
"Food Court 5": {
    stalls: ["Starbucks","Subway","KFC","Brunch Cafe","Bang Deli","Japanese Stall","Fruit Stall","Drinks Stall"],
    descriptions: {
        en: ["The main study hub with a 1-for-1 tradition","Healthy sandwich option","Fried chicken staple","Famous for Japanese Donburi like Pork and Beef bowls","Known for pastries, cakes, and quick lunch boxes","Rotating tenants serving Ramen or Katsu","Fresh juices and sliced fruits","Primary source for local Kopi and Teh"],
        zh: ["主要学习中心, 有1对1传统","健康三明治选项","炸鸡主食","以日式丼饭闻名，如猪肉和牛肉碗","以糕点、蛋糕和快速午餐盒闻名","轮换租户提供拉面或炸猪排","新鲜果汁和切片水果","本地咖啡和茶的主要来源"],
        ta: ["1-க்கு-1 மரபுடன் முதன்மை படிப்பு மையம்","ஆரோக்கியமான சாண்ட்விச் விருப்பம்","பிரைட் கோழி ஸ்டேபிள்","பார்க் மற்றும் பீஃப் பவுல்ஸ் போன்ற ஜப்பானிய டான்புரிக்கு பிரபலமான","பேஸ்ட்ரிகள், கேக்குகள் மற்றும் விரைவான மதிய உணவு பாக்ஸ்களுக்கு அறியப்பட்ட","ரேமன் அல்லது கட்சு வழங்கும் சுழலும் குத்தகைதாரர்கள்","புதிய ஜூஸ் மற்றும் துண்டு பழங்கள்","உள்ளூரில் கோபி மற்றும் தேய் பிரதான மூலம்"],
        ms: ["Hab utama belajar dengan tradisi 1-untuk-1","Pilihan sandwich sihat","Stap ayam goreng","Terkenal untuk Donburi Jepun seperti mangkuk Babi dan Daging","Dikenali untuk pastri, kek, dan kotak makan tengah hari pantas","Penyewa berputar yang menyajikan Ramen atau Katsu","Jus segar dan buah-buahan iris","Sumber utama untuk Kopi dan Teh tempatan"]
    },
    times: {
        "8am-10am": [60, 40, 0, 0, 50, 0, 50, 60],
        "10am-12pm": [95, 95, 95, 90, 85, 80, 90, 100],
        "12pm-3pm": [100, 100, 100, 100, 90, 80, 100, 100],
        "3pm-5pm": [70, 60, 60, 50, 60, 50, 50, 70],
        "5pm-7pm": [50, 50, 50, 40, 40, 35, 30, 60]
    }
},
"Food Court 6": {
    stalls: ["Creamy Duck","Western Food","Japanese Cuisine","Chicken Rice","Vegetarian Stall","Mixed Vegetable Rice","Yong Tau Foo / Fish Soup","Drinks & Toast Stall"],
    descriptions: {
        en: ["Legendary waffles and ice cream, must try!","Famous for large chicken chops and cheap prices","Affordable Teriyaki Chicken and Curry Rice","Reliable daily staple","Healthy and budget-friendly options","Popular for nearby office staff","Variety of fresh ingredients for soups","Early-morning drinks and toast, stays open the longest"],
        zh: ["传奇华夫饼和冰淇淋，必须试试！","以大鸡扒和便宜价格闻名","实惠的照烧鸡和咖喱饭","可靠的日常主食","健康且预算友好的选项","附近办公室员工受欢迎","汤品新鲜配料的多种选择","早间饮料和吐司，营业时间最长"],
        ta: ["புராண வாஃபிள்ஸ் மற்றும் ஐஸ் க்ரீம், கட்டாயம் முயற்சிக்கவும்!","பெரிய கோழி சாப் மற்றும் மலிவு விலைகளுக்கு பிரபலமான","மலிவான டெரியாகி கோழி மற்றும் கறி சாதம்","நம்பகமான தினசரி ஸ்டேபிள்","ஆரோக்கியமான மற்றும் பட்ஜெட்-நட்பு விருப்பங்கள்","அருகிலுள்ள அலுவலக ஊழியர்களுக்கு பிரபலமான","சூப் களுக்கு புதிய பொருட்களின் வகை","காலை காலை பானங்கள் மற்றும் டோஸ்ட், மிக நீண்ட திறந்திருக்கும்"],
        ms: ["Wafel legenda dan ais krim, mesti cuba!","Terkenal dengan ayam goreng besar dan harga murah","Ayam Teriyaki dan Nasi Kari yang mampu milik","Stap harian yang boleh dipercayai","Pilihan sihat dan bajet mesra","Popular untuk kakitangan pejabat berdekatan","Pelbagai bahan segar untuk sup","Minuman pagi dan roti bakar, buka paling lama"]
    },
    times: {
        "8am-10am": [40, 30, 30, 20, 20, 20, 20, 40],
        "10am-12pm": [95, 95, 95, 90, 90, 90, 90, 95],
        "12pm-3pm": [100, 100, 100, 100, 95, 95, 90, 100],
        "3pm-5pm": [40, 40, 40, 30, 30, 30, 30, 40],
        "5pm-7pm": [10, 10, 10, 10, 10, 10, 10, 20]
    }
}
};

// Continue from here:
const infoTranslations = {
    en: {
        selectDate: "Select a date to see details.",
        academicDay: "Academic Day",
        vacation: "Vacation Period",
        midTests: "Mid-Semester Tests",
        midVacation: "Mid-Semester Vacation",
        term2: "Term 2 Classes Begin",
        // Event titles and texts (for the events object)
        firstDaySemester: "First Day of Semester",
        firstDayText: "All students return to campus.\nHigh crowd expected across all food courts.",
        openHouse: "SP Open House & I&I Showcase",
        openHouseText: "Major campus event with public visitors, tours and exhibitions.\nVery high crowd.",
        oLevelResults: "GCE O-Level Results Release",
        oLevelText: "Prospective students and parents visit campus for JAE counselling.\nCrowded Convention Centre.",
        examTimetable: "Exam Timetable Release",
        examTimetableText: "Start of intensive revision period.\nLibraries and study areas very crowded.",
        abecEvent: "ABEC Grow & Green Initiative",
        abecText: "Community and sustainability event by Architecture & Built Environment Club.\nStudent volunteers active around ABE blocks and Jurong East area.",
        finalExamSeats: "Release of Final Exam Seats",
        finalExamSeatsText: "Students receive official exam seat numbers.\nHigh stress levels and heavy library usage expected.",
        decisionDeadline: "Decision Deadline",
        decisionDeadlineText: "Final deadline for course/module deferments or withdrawals.\nStudent Service Centre and school offices are crowded.",
        cnyEve: "Chinese New Year Eve",
        cnyEveText: "Most students leave campus early for reunion dinners.\nCampus likely to be quiet by noon.",
        cny: "Chinese New Year",
        cnyText: "Public Holiday.\nEntire campus, including food courts and libraries, is closed.",
        examsBegin: "Semester 2 Examinations Begin",
        examsBeginText: "Exams officially begin.\nLarge waves of students gather near exam halls before paper start times.",
        muggingPeriod: "Final Exams - Mugging Period",
        muggingPeriodText: "Peak revision period.\nLibraries and study areas reach maximum capacity from early morning.",
        examsEnd: "Final Exams End",
        examsEndText: "Final examination day.\nLarge student waves near exam halls before paper timings.",
        businessPlan: "BusinessPlan 2026",
        businessPlanText: "Signature competition hosted by SP School of Business.\nHigh influx of secondary school students and faculty around Block W and Convention Centre.",
        internshipBegin: "Internship Programme Begins",
        internshipBeginText: "Many Year 2 and Year 3 students begin internships.\nCampus becomes noticeably quieter.",
        hariRayaPuasa: "Hari Raya Puasa",
        hariRayaPuasaText: "Public Holiday.\nCampus closed with zero student activity.",
        resultRelease: "Result Release Day",
        resultReleaseText: "Results released online.\nSmall wave of students return for celebrations, appeals and admin matters.",
        goodFriday: "Good Friday (Public Holiday)",
        goodFridayText: "Public holiday.\nCampus is closed with zero student activity.",
        timetableRelease: "Release of Class Timetable",
        timetableReleaseText: "Students check timetables online.\nMinimal physical crowd on campus.",
        fop: "Freshmen Orientation Programme (FOP)",
        fopText: "Orientation activities for Year 1 students.\nHigh crowd levels around SP Plaza and food courts.",
        term1Begin: "First Day of Term 1",
        term1BeginText: "All students return to campus.\nExtremely crowded MRT, food courts, and walkways.",
        labourDay: "Labour Day (Public Holiday)",
        labourDayText: "Public holiday.\nCampus is closed with zero student activity.",
        graduation: "Graduation Ceremonies",
        graduationText: "Thousands of graduates return.\nFC1 and SP Plaza extremely crowded, lots of photos at Red Bridge.",
        projectCrunch: "Project & Assignment Crunch",
        projectCrunchText: "Students in labs and libraries working intensively.\nFood courts remain busy.",
        excellenceAwards: "SP Excellence Awards",
        excellenceAwardsText: "Recognition ceremony for top students and CCA leaders.\nSome facilities booked, moderate crowd expected.",
        hariRayaHaji: "Hari Raya Haji (Public Holiday)",
        hariRayaHajiText: "Campus is closed for public holiday.\nZero student activity.",
        preTestRevision: "Pre-Test Revision Days",
        preTestRevisionText: "Intense library usage.\nStudents prepare for upcoming tests.",
        vesakDay: "Vesak Day (Public Holiday)",
        vesakDayText: "Campus is closed for public holiday.\nZero student activity.",
        midSemesterTests: "Mid-Semester Tests",
        midSemesterTestsText: "Large groups arrive for test slots.\nFood Courts (FC1, FC5) and libraries very crowded 11AM–2PM.",
        goEcoWeek: "Go Eco Week",
        goEcoWeekText: "Campus-wide sustainability initiatives or staff workshops.\nGeneral student attendance is near zero.",
        term2Begin: "Term 2 Classes Begin",
        term2BeginText: "All students return to campus.\nFood courts and walkways busy, semester starts.",
        // Additional info panel texts (from onclick handler)
        vacationJan: "Semester break from 1-4 January. Campus activity is minimal, hence low crowd levels are expected.",
        studyWeek: "No formal classes.\nFood courts are quieter, but libraries are at maximum capacity throughout the day.",
        aLevelResults: "Increase in external visitors at the Student Service Centre.\nModerate crowd surge expected.",
        finalExamsMugging: "Extreme demand for library seats.\nStudents gather near exam halls before paper timings.",
        vacationGhostTown: "Most students are away.\nMany food stalls operate shorter hours or close temporarily.",
        endVacationApr: "Semester break continues.\nCampus is quiet with minimal student presence.",
        fopOrientation: "Orientation week for Year 1 students.\nExpect loud cheers, mass games, campus tours, and busy lunch hours.",
        term1ClassesBegin: "All students return to campus.\nFood courts experience long queues, and main walkways are heavily congested.",
        labourDayText: "Campus is closed for public holiday.\nZero student activity.",
        graduationText: "Thousands of graduates return.\nFC1 and SP Plaza extremely crowded.\nLots of photos at Red Bridge.",
        projectCrunchText: "Students in labs and libraries working intensively.\nFood courts remain busy.",
        excellenceAwardsText: "Recognition ceremony for top students and CCA leaders.\nModerate crowd expected in certain areas.",
        hariRayaHajiText: "Campus is closed for public holiday.\nZero student activity.",
        preTestRevisionText: "Intense library usage.\nStudents prepare for upcoming tests.",
        vesakDayText: "Campus is closed for public holiday.\nZero student activity.",
        midSemesterTestsText: "Large groups arrive for test slots.\nFood Courts (FC1, FC5) and libraries very crowded 11AM–2PM.",
        midSemesterVacation: "Most students are away.\nCampus is quiet with very low activity.",
        term2ClassesBegin: "All students return to campus.\nFood courts and walkways busy, semester starts."
    },
    zh: {
        selectDate: "选择日期以查看详细信息。",
        academicDay: "上课日",
        vacation: "假期",
        midTests: "期中考试",
        midVacation: "期中假期",
        term2: "第二学期开始",
        // Event titles and texts
        firstDaySemester: "学期第一天",
        firstDayText: "所有学生返回校园。\n所有食堂预计人流量高。",
        openHouse: "SP 开放日及 I&I 展示",
        openHouseText: "大型校园活动，包括公众参观、导览和展览。\n人流量非常高。",
        oLevelResults: "GCE O-Level 成绩发布",
        oLevelText: "潜在学生和家长参观校园进行 JAE 咨询。\n会议中心人满为患。",
        examTimetable: "考试时间表发布",
        examTimetableText: "密集复习期开始。\n图书馆和学习区非常拥挤。",
        abecEvent: "ABEC 成长与绿色倡议",
        abecText: "建筑与建筑环境俱乐部举办的社区和可持续发展活动。\n学生志愿者在 ABE 楼块和裕廊东地区活跃。",
        finalExamSeats: "最终考试座位发布",
        finalExamSeatsText: "学生收到官方考试座位号。\n预计压力水平高, 图书馆使用量大。",
        decisionDeadline: "决定截止日期",
        decisionDeadlineText: "课程/模块延期或退出的最终截止日期。\n学生服务中心和学校办公室人满为患。",
        cnyEve: "农历新年前夕",
        cnyEveText: "大多数学生早早离开校园参加团圆饭。\n校园中午可能安静。",
        cny: "农历新年",
        cnyText: "公众假期。\n整个校园, 包括食堂和图书馆, 关闭。",
        examsBegin: "第二学期考试开始",
        examsBeginText: "考试正式开始。\n学生大潮在考试开始时间前聚集在考场附近。",
        muggingPeriod: "期末考试 - 复习期",
        muggingPeriodText: "复习高峰期。\n图书馆和学习区从清晨达到最大容量。",
        examsEnd: "期末考试结束",
        examsEndText: "期末考试日。\n学生大潮在考试时间前聚集在考场附近。",
        businessPlan: "BusinessPlan 2026",
        businessPlanText: "SP 商学院举办的标志性竞赛。\n中学学生和教职员工大量涌入 W 楼和会议中心。",
        internshipBegin: "实习计划开始",
        internshipBeginText: "许多二年级和三年级学生开始实习。\n校园变得明显安静。",
        hariRayaPuasa: "开斋节",
        hariRayaPuasaText: "公众假期。\n校园关闭, 无学生活动。",
        resultRelease: "成绩发布日",
        resultReleaseText: "成绩在线发布。\n少量学生返回庆祝、申诉和管理事务。",
        goodFriday: "耶稣受难日（公众假期）",
        goodFridayText: "公众假期。\n校园关闭, 无学生活动。",
        timetableRelease: "课程表发布",
        timetableReleaseText: "学生在线查看课程表。\n校园人流量最小。",
        fop: "新生迎新计划 (FOP)",
        fopText: "一年级学生的迎新活动。\nSP 广场和食堂周围人流量高。",
        term1Begin: "第一学期第一天",
        term1BeginText: "所有学生返回校园。\n地铁、食堂和走道极度拥挤。",
        labourDay: "劳动节（公众假期）",
        labourDayText: "公众假期。\n校园关闭, 无学生活动。",
        graduation: "毕业典礼",
        graduationText: "数千毕业生返回。\nFC1 和 SP 广场极度拥挤，红桥拍照多。",
        projectCrunch: "项目与作业高峰",
        projectCrunchText: "学生在实验室和图书馆密集工作。\n食堂仍然繁忙。",
        excellenceAwards: "SP 卓越奖",
        excellenceAwardsText: "顶级学生和 CCA 领袖表彰仪式。\n某些设施预订, 中等人群预计。",
        hariRayaHaji: "哈芝节（公众假期）",
        hariRayaHajiText: "公众假期。\n校园关闭,无学生活动。",
        preTestRevision: "考试前复习日",
        preTestRevisionText: "图书馆使用量大。\n 学生准备即将到来的考试。",
        vesakDay: "卫塞节（公众假期）",
        vesakDayText: "公众假期。\n校园关闭, 无学生活动。",
        midSemesterTests: "期中考试",
        midSemesterTestsText: "大量学生到达考试时段。\n食堂 (FC1, FC5) 和图书馆上午 11 点至下午 2 点非常拥挤。",
        goEcoWeek: "环保周",
        goEcoWeekText: "校园范围内的可持续发展倡议或员工研讨会。\n一般学生出勤率接近零。",
        term2Begin: "第二学期开始",
        term2BeginText: "所有学生返回校园。\n食堂和走道繁忙, 学期开始。",
        // Additional info panel texts
        vacationJan: "1 月 1 日至 4 日学期休息。校园活动最小，因此预计人流量低。",
        studyWeek: "无正式课程。\n食堂较安静, 但图书馆全天达到最大容量。",
        aLevelResults: "学生服务中心外部访客增加。\n预计中等人群涌入。",
        finalExamsMugging: "图书馆座位需求极高。\n学生在考试时间前聚集在考场附近。",
        vacationGhostTown: "大多数学生离开。\n许多食品摊位营业时间缩短或暂时关闭。",
        endVacationApr: "学期休息继续。\n校园安静, 学生存在最小。",
        fopOrientation: "一年级学生迎新周。\n预计大声欢呼、大型游戏、校园导览和繁忙午餐时间。",
        term1ClassesBegin: "所有学生返回校园。\n食堂排长队, 主要走道严重拥挤。",
        labourDayText: "公众假期。\n校园关闭, 无学生活动。",
        graduationText: "数千毕业生返回。\nFC1 和 SP 广场极度拥挤。\n红桥拍照多。",
        projectCrunchText: "学生在实验室和图书馆密集工作。\n食堂仍然繁忙。",
        excellenceAwardsText: "顶级学生和 CCA 领袖表彰仪式。\n某些地区预计中等人群。",
        hariRayaHajiText: "公众假期。\n校园关闭,无学生活动。",
        preTestRevisionText: "图书馆使用量大。\n学生准备即将到来的考试。",
        vesakDayText: "公众假期。\n校园关闭, 无学生活动。",
        midSemesterTestsText: "大量学生到达考试时段。\n食堂 (FC1, FC5) 和图书馆上午 11 点至下午 2 点非常拥挤。",
        midSemesterVacation: "大多数学生离开。\n校园安静, 活动非常低。",
        term2ClassesBegin: "所有学生返回校园。\n食堂和走道繁忙, 学期开始。"
    },
    ta: {
        selectDate: "விவரங்களை பார்க்க தேதியைத் தேர்ந்தெடுக்கவும்.",
        academicDay: "கல்வி நாள்",
        vacation: "விடுமுறை",
        midTests: "நடுத்தர பரீட்சைகள்",
        midVacation: "நடுத்தர விடுமுறை",
        term2: "2ஆம் பருவ வகுப்புகள் துவங்கும்",
        // Event titles and texts
        firstDaySemester: "செமஸ்டர் முதல் நாள்",
        firstDayText: "அனைத்து மாணவர்களும் வகுப்பிற்கு திரும்புகின்றனர்.\nஅனைத்து உணவு நிலையங்களிலும் அதிக கூட்டம் எதிர்பார்க்கப்படுகிறது.",
        openHouse: "SP திறந்த நாள் மற்றும் I&I கண்காட்சி",
        openHouseText: "பொது பார்வையாளர்கள், சுற்றுலா மற்றும் கண்காட்சிகளுடன் பெரிய வகுப்பு நிகழ்வு.\nமிகவும் அதிக கூட்டம்.",
        oLevelResults: "GCE O-Level முடிவுகள் வெளியீடு",
        oLevelText: "சாத்தியமான மாணவர்கள் மற்றும் பெற்றோர் JAE ஆலோசனைக்கு வகுப்பைப் பார்வையிடுகின்றனர்.\nகூட்டம் நிறைந்த மருத்துவ மையம்.",
        examTimetable: "பரீட்சை அட்டவணை வெளியீடு",
        examTimetableText: "தீவிர மறுபரிசீலனை காலம் தொடங்குகிறது.\nநூலகங்கள் மற்றும் படிப்பு பகுதிகள் மிகவும் கூட்டமாக உள்ளன.",
        abecEvent: "ABEC வளர்ச்சி மற்றும் பச்சை முயற்சி",
        abecText: "கட்டிடம் மற்றும் கட்டிட சூழல் கிளப் நடத்தும் சமூக மற்றும் நிலைத்தன்மை நிகழ்வு.\nமாணவர் தன்னார்வலர்கள் ABE தொகுதிகள் மற்றும் யூராங் கிழக்கு பகுதியில் செயல்படுகின்றனர்.",
        finalExamSeats: "இறுதி பரீட்சை இருக்கைகள் வெளியீடு",
        finalExamSeatsText: "மாணவர்கள் அதிகாரப்பூர்வ பரீட்சை இருக்கை எண்களைப் பெறுகின்றனர்.\nஅதிக அழுத்த நிலைகள் மற்றும் நூலக பயன்பாடு எதிர்பார்க்கப்படுகிறது.",
        decisionDeadline: "முடிவு காலக்கெடு",
        decisionDeadlineText: "கோர்ஸ்/தொகுதி தாமதங்கள் அல்லது விலகல்களின் இறுதி காலக்கெடு.\nமாணவர் சேவை மையம் மற்றும் பள்ளி அலுவலகங்கள் கூட்டமாக உள்ளன.",
        cnyEve: "சீனப் புத்தாண்டு முன்னோடி",
        cnyEveText: "பெரும்பாலான மாணவர்கள் ஒன்றிணைந்த உணவுக்கு வகுப்பை விட்டு வெளியேறுகின்றனர்.\nவகுப்பு மதியம் அமைதியாக இருக்கும்.",
        cny: "சீனப் புத்தாண்டு",
        cnyText: "பொது விடுமுறை.\nஉணவு நிலையங்கள் மற்றும் நூலகங்கள் உள்ளிட்ட முழு வகுப்பு மூடப்பட்டுள்ளது.",
        examsBegin: "இரண்டாம் செமஸ்டர் பரீட்சைகள் தொடங்குகின்றன",
        examsBeginText: "பரீட்சைகள் அதிகாரப்பூர்வமாக தொடங்குகின்றன.\nபரீட்சை தொடங்கும் நேரத்திற்கு முன் பரீட்சை அரங்குகளுக்கு அருகில் மாணவர் அலைகள் கூடுகின்றன.",
        muggingPeriod: "இறுதி பரீட்சைகள் - மறுபரிசீலனை காலம்",
        muggingPeriodText: "மறுபரிசீலனை உச்ச காலம்.\nநூலகங்கள் மற்றும் படிப்பு பகுதிகள் காலை முதல் அதிகபட்ச திறனை அடைகின்றன.",
        examsEnd: "இறுதி பரீட்சைகள் முடிவு",
        examsEndText: "இறுதி பரீட்சை நாள்.\nபரீட்சை நேரத்திற்கு முன் பரீட்சை அரங்குகளுக்கு அருகில் மாணவர் அலைகள்.",
        businessPlan: "BusinessPlan 2026",
        businessPlanText: "SP வணிக பள்ளியால் நடத்தப்படும் குறியீடு போட்டி.\nW தொகுதி மற்றும் மருத்துவ மையத்தைச் சுற்றி உயர்நிலை மாணவர்கள் மற்றும் பாட்டாளிகள் அதிகம் வருகின்றனர்.",
        internshipBegin: "இன்டர்ன்ஷிப் திட்டம் தொடங்குகிறது",
        internshipBeginText: "பல இரண்டாம் மற்றும் மூன்றாம் ஆண்டு மாணவர்கள் இன்டர்ன்ஷிப்பைத் தொடங்குகின்றனர்.\nவகுப்பு குறிப்பிடத்தக்க அளவில் அமைதியாகிறது.",
        hariRayaPuasa: "ஹரி ராயா பூஸா",
        hariRayaPuasaText: "பொது விடுமுறை.\nவகுப்பு மூடப்பட்டுள்ளது, மாணவர் செயல்பாடு இல்லை.",
        resultRelease: "முடிவு வெளியீடு நாள்",
        resultReleaseText: "முடிவுகள் ஆன்லைனில் வெளியிடப்படுகின்றன.\nகொண்டாட்டங்கள், முறையீடுகள் மற்றும் நிர்வாக விஷயங்களுக்கு சிறிய மாணவர் அலை திரும்புகிறது.",
        goodFriday: "நல்ல வெள்ளிக்கிழமை (பொது விடுமுறை)",
        goodFridayText: "பொது விடுமுறை.\nவகுப்பு மூடப்பட்டுள்ளது, மாணவர் செயல்பாடு இல்லை.",
        timetableRelease: "வகுப்பு அட்டவணை வெளியீடு",
        timetableReleaseText: "மாணவர்கள் ஆன்லைனில் அட்டவணையைச் சரிபார்க்கின்றனர்.\nகுறைந்த உடல் கூட்டம் வகுப்பில்.",
        fop: "புதிய மாணவர் அறிமுக திட்டம் (FOP)",
        fopText: "ஒரு ஆண்டு மாணவர்களுக்கான அறிமுக செயல்பாடுகள்.\nSP பிளாசா மற்றும் உணவு நிலையங்களைச் சுற்றி அதிக கூட்ட நிலைகள்.",
        term1Begin: "முதல் பருவம் முதல் நாள்",
        term1BeginText: "அனைத்து மாணவர்களும் வகுப்பிற்கு திரும்புகின்றனர்.\nமிகவும் கூட்டமான MRT, உணவு நிலையங்கள் மற்றும் நடைபாதைகள்.",
        labourDay: "தொழிலாளர் தினம் (பொது விடுமுறை)",
        labourDayText: "பொது விடுமுறை.\nவகுப்பு மூடப்பட்டுள்ளது, மாணவர் செயல்பாடு இல்லை.",
        graduation: "பட்டமளிப்பு விழாக்கள்",
        graduationText: "ஆயிரக்கணக்கான பட்டதாரிகள் திரும்புகின்றனர்.\nFC1 மற்றும் SP பிளாசா மிகவும் கூட்டமாக, சிவப்பு பாலத்தில் பல புகைப்படங்கள்.",
        projectCrunch: "திட்டம் மற்றும் பணி கிரஞ்ச்",
        projectCrunchText: "மாணவர்கள் ஆய்வகங்கள் மற்றும் நூலகங்களில் தீவிரமாக வேலை செய்கின்றனர்.\nஉணவு நிலையங்கள் இன்னும் பிஸியாக இருக்கும்.",
        excellenceAwards: "SP சிறப்பு விருதுகள்",
        excellenceAwardsText: "சிறந்த மாணவர்கள் மற்றும் CCA தலைவர்களின் அங்கீகார விழா.\nசில வசதிகள் முன்பதிவு செய்யப்பட்டுள்ளன, மிதமான கூட்டம் எதிர்பார்க்கப்படுகிறது.",
        hariRayaHaji: "ஹரி ராயா ஹாஜி (பொது விடுமுறை)",
        hariRayaHajiText: "பொது விடுமுறை.\nவகுப்பு மூடப்பட்டுள்ளது, மாணவர் செயல்பாடு இல்லை.",
        preTestRevision: "பரீட்சைக்கு முன் மறுபரிசீலனை நாட்கள்",
        preTestRevisionText: "தீவிர நூலக பயன்பாடு.\nமாணவர்கள் வரவிருக்கும் பரீட்சைகளுக்கு தயார்படுகின்றனர்.",
        vesakDay: "வேசாக் தினம் (பொது விடுமுறை)",
        vesakDayText: "பொது விடுமுறை.\nவகுப்பு மூடப்பட்டுள்ளது, மாணவர் செயல்பாடு இல்லை.",
        midSemesterTests: "நடுத்தர செமஸ்டர் பரீட்சைகள்",
        midSemesterTestsText: "பரீட்சை ஸ்லாட்டுகளுக்கு பெரிய குழுக்கள் வருகின்றன.\nஉணவு நிலையங்கள் (FC1, FC5) மற்றும் நூலகங்கள் காலை 11 மணி-மாலை 2 மணி மிகவும் கூட்டமாக உள்ளன.",
        goEcoWeek: "பச்சை வாரம் செல்",
        goEcoWeekText: "வகுப்பு அளவிலான நிலைத்தன்மை முயற்சிகள் அல்லது ஊழியர் பட்டறைகள்.\nபொதுவான மாணவர் வருகை கிட்டத்தட்ட பூஜ்ஜியம்.",
        term2Begin: "இரண்டாம் பருவம் தொடங்குகிறது",
        term2BeginText: "அனைத்து மாணவர்களும் வகுப்பிற்கு திரும்புகின்றனர்.\nஉணவு நிலையங்கள் மற்றும் நடைபாதைகள் பிஸி, செமஸ்டர் தொடங்குகிறது.",
        // Additional info panel texts
        vacationJan: "ஜனவரி 1-4 இலிருந்து செமஸ்டர் இடைவெளி. வகுப்பு செயல்பாடு குறைந்தது, எனவே குறைந்த கூட்ட நிலைகள் எதிர்பார்க்கப்படுகின்றன.",
        studyWeek: "முறையான வகுப்புகள் இல்லை.\nஉணவு நிலையங்கள் அமைதியாக இருக்கும், ஆனால் நூலகங்கள் முழு நாளும் அதிகபட்ச திறனில் இருக்கும்.",
        aLevelResults: "மாணவர் சேவை மையத்தில் வெளிப்புற பார்வையாளர்கள் அதிகரிப்பு.\nமிதமான கூட்ட அதிகரிப்பு எதிர்பார்க்கப்படுகிறது.",
        finalExamsMugging: "நூலக இருக்கைகளுக்கு அதிக தேவை.\nபரீட்சை நேரத்திற்கு முன் பரீட்சை அரங்குகளுக்கு அருகில் மாணவர்கள் கூடுகின்றன.",
        vacationGhostTown: "பெரும்பாலான மாணவர்கள் வெளியேறுகின்றனர்.\nபல உணவு கடைகள் குறுகிய மணிநேரம் செயல்படுகின்றன அல்லது தற்காலிகமாக மூடுகின்றன.",
        endVacationApr: "செமஸ்டர் இடைவெளி தொடர்கிறது.\nவகுப்பு அமைதியாக, மாணவர் இருப்பு குறைந்தது.",
        fopOrientation: "ஒரு ஆண்டு மாணவர்களுக்கான அறிமுக வாரம்.\nஉரத்த கோஷங்கள், பெரிய விளையாட்டுகள், வகுப்பு சுற்றுலா மற்றும் பிஸி மதிய நேரங்கள் எதிர்பார்க்கப்படுகின்றன.",
        term1ClassesBegin: "அனைத்து மாணவர்களும் வகுப்பிற்கு திரும்புகின்றனர்.\nஉணவு நிலையங்கள் நீண்ட வரிசைகளை அனுபவிக்கின்றன, முக்கிய நடைபாதைகள் கடுமையாக நெரிந்துள்ளன.",
        labourDayText: "பொது விடுமுறை.\nவகுப்பு மூடப்பட்டுள்ளது, மாணவர் செயல்பாடு இல்லை.",
        graduationText: "ஆயிரக்கணக்கான பட்டதாரிகள் திரும்புகின்றனர்.\nFC1 மற்றும் SP பிளாசா மிகவும் கூட்டமாக.\nசிவப்பு பாலத்தில் பல புகைப்படங்கள்.",
        projectCrunchText: "மாணவர்கள் ஆய்வகங்கள் மற்றும் நூலகங்களில் தீவிரமாக வேலை செய்கின்றனர்.\nஉணவு நிலையங்கள் இன்னும் பிஸியாக இருக்கும்.",
        excellenceAwardsText: "சிறந்த மாணவர்கள் மற்றும் CCA தலைவர்களின் அங்கீகார விழா.\nசில பகுதிகளில் மிதமான கூட்டம் எதிர்பார்க்கப்படுகிறது.",
        hariRayaHajiText: "பொது விடுமுறை.\nவகுப்பு மூடப்பட்டுள்ளது, மாணவர் செயல்பாடு இல்லை.",
        preTestRevisionText: "தீவிர நூலக பயன்பாடு.\nமாணவர்கள் வரவிருக்கும் பரீட்சைகளுக்கு தயார்படுகின்றனர்.",
        vesakDayText: "பொது விடுமுறை.\nவகுப்பு மூடப்பட்டுள்ளது, மாணவர் செயல்பாடு இல்லை.",
        midSemesterTestsText: "பரீட்சை ஸ்லாட்டுகளுக்கு பெரிய குழுக்கள் வருகின்றன.\nஉணவு நிலையங்கள் (FC1, FC5) மற்றும் நூலகங்கள் காலை 11 மணி-மாலை 2 மணி மிகவும் கூட்டமாக உள்ளன.",
        midSemesterVacation: "பெரும்பாலான மாணவர்கள் வெளியேறுகின்றனர்.\nவகுப்பு அமைதியாக, மிகவும் குறைந்த செயல்பாடு.",
        term2ClassesBegin: "அனைத்து மாணவர்களும் வகுப்பிற்கு திரும்புகின்றனர்.\nஉணவு நிலையங்கள் மற்றும் நடைபாதைகள் பிஸி, செமஸ்டர் தொடங்குகிறது."
    },
    ms: {
        selectDate: "Pilih tarikh untuk melihat butiran.",
        academicDay: "Hari Akademik",
        vacation: "Tempoh Percutian",
        midTests: "Ujian Pertengahan Semester",
        midVacation: "Percutian Pertengahan Semester",
        term2: "Kelas Term 2 Bermula",
        // Event titles and texts (for the events object)
        firstDaySemester: "Hari Pertama Semester",
        firstDayText: "Semua pelajar kembali ke kampus.\nJangkaan kesesakan tinggi di semua dewan makan.",
        openHouse: "Hari Terbuka SP & Pertunjukan I&I",
        openHouseText: "Acara kampus utama dengan pelawat awam, lawatan dan pameran.\nKesesakan sangat tinggi.",
        oLevelResults: "Pelepasan Keputusan GCE O-Level",
        oLevelText: "Calon pelajar dan ibu bapa melawat kampus untuk kaunseling JAE.\nPusat Konvensyen sesak.",
        examTimetable: "Pelepasan Jadual Peperiksaan",
        examTimetableText: "Permulaan tempoh ulang kaji intensif.\nPerpustakaan dan kawasan belajar sangat sesak.",
        abecEvent: "Inisiatif ABEC Grow & Green",
        abecText: "Acara komuniti dan kemampanan oleh Kelab Seni Bina & Persekitaran Binaan.\nRelawan pelajar aktif di sekitar blok ABE dan kawasan Jurong East.",
        finalExamSeats: "Pelepasan Tempat Duduk Peperiksaan Akhir",
        finalExamSeatsText: "Pelajar menerima nombor tempat duduk peperiksaan rasmi.\nJangkaan tahap tekanan tinggi dan penggunaan perpustakaan yang tinggi.",
        decisionDeadline: "Tarikh Akhir Keputusan",
        decisionDeadlineText: "Tarikh akhir untuk penangguhan atau penarikan balik kursus/modul.\nPusat Perkhidmatan Pelajar dan pejabat sekolah sesak.",
        cnyEve: "Malam Tahun Baru Cina",
        cnyEveText: "Kebanyakan pelajar meninggalkan kampus awal untuk makan malam perhimpunan.\nKampus mungkin sunyi menjelang tengah hari.",
        cny: "Tahun Baru Cina",
        cnyText: "Cuti Umum.\nSeluruh kampus, termasuk dewan makan dan perpustakaan, ditutup.",
        examsBegin: "Peperiksaan Semester 2 Bermula",
        examsBeginText: "Peperiksaan bermula secara rasmi.\nGelombang besar pelajar berkumpul berhampiran dewan peperiksaan sebelum masa kertas bermula.",
        muggingPeriod: "Peperiksaan Akhir - Tempoh Ulang Kaji",
        muggingPeriodText: "Tempoh ulang kaji puncak.\nPerpustakaan dan kawasan belajar mencapai kapasiti maksimum dari awal pagi.",
        examsEnd: "Peperiksaan Akhir Berakhir",
        examsEndText: "Hari peperiksaan akhir.\nGelombang pelajar besar berhampiran dewan peperiksaan sebelum masa kertas.",
        businessPlan: "BusinessPlan 2026",
        businessPlanText: "Pertandingan tanda tangan yang dianjurkan oleh Sekolah Perniagaan SP.\nAliran masuk pelajar sekolah menengah dan fakulti yang tinggi di sekitar Blok W dan Pusat Konvensyen.",
        internshipBegin: "Program Latihan Industri Bermula",
        internshipBeginText: "Ramai pelajar Tahun 2 dan Tahun 3 memulakan latihan industri.\nKampus menjadi ketara lebih sunyi.",
        hariRayaPuasa: "Hari Raya Puasa",
        hariRayaPuasaText: "Cuti Umum.\nKampus ditutup dengan aktiviti pelajar sifar.",
        resultRelease: "Hari Pelepasan Keputusan",
        resultReleaseText: "Keputusan dikeluarkan dalam talian.\nGelombang kecil pelajar kembali untuk sambutan, rayuan dan urusan pentadbiran.",
        goodFriday: "Jumaat Agung (Cuti Umum)",
        goodFridayText: "Cuti umum.\nKampus ditutup dengan aktiviti pelajar sifar.",
        timetableRelease: "Pelepasan Jadual Kelas",
        timetableReleaseText: "Pelajar menyemak jadual dalam talian.\nKesesakan fizikal minimum di kampus.",
        fop: "Program Orientasi Pelajar Baru (FOP)",
        fopText: "Aktiviti orientasi untuk pelajar Tahun 1.\nTahap kesesakan tinggi di sekitar SP Plaza dan dewan makan.",
        term1Begin: "Hari Pertama Term 1",
        term1BeginText: "Semua pelajar kembali ke kampus.\nMRT, dewan makan, dan laluan pejalan kaki yang sangat sesak.",
        labourDay: "Hari Buruh (Cuti Umum)",
        labourDayText: "Cuti umum.\nKampus ditutup dengan aktiviti pelajar sifar.",
        graduation: "Majlis Graduasi",
        graduationText: "Ribuan graduan kembali.\nFC1 dan SP Plaza sangat sesak, banyak gambar di Jambatan Merah.",
        projectCrunch: "Tekanan Projek & Tugasan",
        projectCrunchText: "Pelajar di makmal dan perpustakaan bekerja dengan intensif.\nDewan makan kekal sibuk.",
        excellenceAwards: "Anugerah Kecemerlangan SP",
        excellenceAwardsText: "Majlis pengiktirafan untuk pelajar teratas dan pemimpin CCA.\nBeberapa kemudahan ditempah, jangkaan kesesakan sederhana.",
        hariRayaHaji: "Hari Raya Haji (Cuti Umum)",
        hariRayaHajiText: "Cuti umum.\nKampus ditutup dengan aktiviti pelajar sifar.",
        preTestRevision: "Hari Ulang Kaji Pra-Ujian",
        preTestRevisionText: "Penggunaan perpustakaan yang intensif.\nPelajar bersiap sedia untuk ujian yang akan datang.",
        vesakDay: "Hari Wesak (Cuti Umum)",
        vesakDayText: "Cuti umum.\nKampus ditutup dengan aktiviti pelajar sifar.",
        midSemesterTests: "Ujian Pertengahan Semester",
        midSemesterTestsText: "Kumpulan besar tiba untuk slot ujian.\nDewan Makan (FC1, FC5) dan perpustakaan sangat sesak dari 11 pagi hingga 2 petang.",
        goEcoWeek: "Minggu Go Eco",
        goEcoWeekText: "Inisiatif kemampanan di seluruh kampus atau bengkel kakitangan.\nKehadiran pelajar umum hampir sifar.",
        term2Begin: "Kelas Term 2 Bermula",
        term2BeginText: "Semua pelajar kembali ke kampus.\nDewan makan dan laluan pejalan kaki sibuk, semester bermula.",
        vacationJan: "Cuti semester dari 1-4 Januari. Aktiviti kampus adalah minimum, oleh itu tahap kesesakan rendah dijangka.",
        studyWeek: "Tiada kelas formal.\nDewan makan lebih tenang, tetapi perpustakaan pada kapasiti maksimum sepanjang hari.",
        aLevelResults: "Peningkatan pelawat luar di Pusat Perkhidmatan Pelajar.\nJangkaan lonjakan kesesakan sederhana.",
        finalExamsMugging: "Permintaan tempat duduk perpustakaan yang melampau.\nPelajar berkumpul berhampiran dewan peperiksaan sebelum masa kertas.",
        vacationGhostTown: "Kebanyakan pelajar tiada.\nBanyak gerai makanan beroperasi pada waktu yang lebih singkat atau ditutup sementara.",
        endVacationApr: "Cuti semester berterusan.\nKampus sunyi dengan kehadiran pelajar yang minimum.",
        fopOrientation: "Minggu orientasi untuk pelajar Tahun 1.\nJangkaan sorakan kuat, permainan besar, lawatan kampus, dan waktu makan tengah hari yang sibuk.",
        term1ClassesBegin: "Semua pelajar kembali ke kampus.\nDewan makan mengalami barisan panjang, dan laluan utama sesak teruk.",
        labourDayText: "Cuti umum.\nKampus ditutup dengan aktiviti pelajar sifar.",
        graduationText: "Ribuan graduan kembali.\nFC1 dan SP Plaza sangat sesak.\nBanyak gambar di Jambatan Merah.",
        projectCrunchText: "Pelajar di makmal dan perpustakaan bekerja dengan intensif.\nDewan makan kekal sibuk.",
        excellenceAwardsText: "Majlis pengiktirafan untuk pelajar teratas dan pemimpin CCA.\nJangkaan kesesakan sederhana di kawasan tertentu.",
        hariRayaHajiText: "Cuti umum.\nKampus ditutup dengan aktiviti pelajar sifar.",
        preTestRevisionText: "Penggunaan perpustakaan yang intensif.\nPelajar bersiap sedia untuk ujian yang akan datang.",
        vesakDayText: "Cuti umum.\nKampus ditutup dengan aktiviti pelajar sifar.",
        midSemesterTestsText: "Kumpulan besar tiba untuk slot ujian.\nDewan Makan (FC1, FC5) dan perpustakaan sangat sesak dari 11 pagi hingga 2 petang.",
        midSemesterVacation: "Kebanyakan pelajar tiada.\nKampus sunyi dengan aktiviti yang sangat rendah.",
        term2ClassesBegin: "Semua pelajar kembali ke kampus.\nDewan makan dan laluan pejalan kaki sibuk, semester bermula."
    }
};

let activeFoodCourt = null;
let activeTimePeriod = "10am-12pm";

function applyLanguage(lang) {
    currentLang = lang;
    localStorage.setItem("lang", lang);

    const t = translations[lang];
    const infoT = infoTranslations[lang];

    /* ========= INDEX PAGE ========= */
    if (document.getElementById("menuTitle")) {
        document.getElementById("menuTitle").innerText = t.menuTitle;
        document.getElementById("scheduleBtn").innerText = t.scheduleBtn;
        document.getElementById("trackerBtn").innerText = t.trackerBtn;
    }

    /* ========= SCHEDULE PAGE ========= */
    if (document.getElementById("pageTitle")) {
        document.getElementById("pageTitle").innerText = t.scheduleBtn;
    }

    if (document.getElementById("legendTitle")) {
        document.getElementById("legendTitle").innerText = t.crowdLevelLegend;
        document.getElementById("legendLow").innerText = t.low;
        document.getElementById("legendMedium").innerText = t.medium;
        document.getElementById("legendHigh").innerText = t.high;
        document.getElementById("legendWeekend").innerText = t.weekend;
    }

    /* ========= INFO PANEL DEFAULT TEXT ========= */
    if (document.getElementById("infoTitle")) {
        document.getElementById("infoTitle").innerHTML =
            `<strong>${infoT.academicDay}</strong>`;
    }

    if (document.getElementById("infoText")) {
        document.getElementById("infoText").innerText =
            infoT.selectDate;
    }

    /* ========= REGENERATE CALENDAR ========= */
    if (typeof generateCalendar === "function") {
        generateCalendar();
    }

    if (document.getElementById("foodTrackerTitle")) {
        document.getElementById("foodTrackerTitle").innerText =
        translations[lang].foodTrackerTitle;
    }

    /* ========= FOODCOURT PAGE ========= */
    if (typeof updateStallList === "function" && activeFoodCourt) {
        const translatedFc = translations[lang].foodCourtNames?.[activeFoodCourt] || activeFoodCourt;

        const fcTitle = document.getElementById("fc-title");
        if (fcTitle) fcTitle.innerText = translatedFc;

        updateStallList(activeFoodCourt, activeTimePeriod);
    }

    document.querySelectorAll(".foodcourt-card").forEach(card => {
        const fc = card.dataset.fc;
        const overlay = card.querySelector(".foodcourt-overlay");
        if (overlay) {
            overlay.innerText = translations[lang].foodCourtNames?.[fc] || fc;
        }
    });

    // Update section titles and buttons
    if (document.getElementById("pickFoodcourt")) {
        document.getElementById("pickFoodcourt").innerText = translations[lang].pickFoodcourt;
    }
    if (document.getElementById("salesAvailable")) {
        document.getElementById("salesAvailable").innerText = translations[lang].salesAvailable;
    }
    if (document.getElementById("timePeriod")) {
        document.getElementById("timePeriod").innerText = translations[lang].timePeriod;
    }
    if (document.getElementById("time1")) {
        document.getElementById("time1").innerText = translations[lang].time1;
    }
    if (document.getElementById("time2")) {
        document.getElementById("time2").innerText = translations[lang].time2;
    }
    if (document.getElementById("time3")) {
        document.getElementById("time3").innerText = translations[lang].time3;
    }
    if (document.getElementById("time4")) {
        document.getElementById("time4").innerText = translations[lang].time4;
    }
    if (document.getElementById("time5")) {
        document.getElementById("time5").innerText = translations[lang].time5;
    }
}

document.addEventListener("DOMContentLoaded", () => {

    /* ==================
       INDEX PAGE LOGIC
    =====================*/

    const scheduleBtn = document.getElementById("scheduleBtn");
    if (scheduleBtn) {
        scheduleBtn.addEventListener("click", () => {
            window.location.href = "schedule.html";
        });
    }

    const trackerBtn = document.getElementById("trackerBtn");
    if (trackerBtn) {
        trackerBtn.addEventListener("click", () => {
            window.location.href = "foodcourt.html";
        });
    }

    const closingHourBtn = document.getElementById("closingHourBtn");
    if (closingHourBtn) {
        closingHourBtn.addEventListener("click", () => {
            window.location.href = "closinghour.html";
        });
    }

    /* ==================
    SIDE MENU LOGIC
    ====================*/

    const profileBtn = document.getElementById("profileBtn");
    const sideMenu = document.getElementById("sideMenu");
    const languageMenu = document.getElementById("languageMenu");
    const sideOverlay = document.getElementById("sideOverlay");

    const openLanguageBtn = document.getElementById("openLanguageBtn");
    const backToMenuBtn = document.getElementById("backToMenuBtn");

    const backContainerBtn = document.getElementById("backContainerBtn");
    const container = document.querySelector(".container");

    if (profileBtn && sideMenu && sideOverlay) {
        profileBtn.addEventListener("click", () => {
            sideMenu.classList.add("active");
            sideOverlay.classList.add("active");
        });
    }

    if (sideOverlay) {
        sideOverlay.addEventListener("click", () => {
            sideMenu?.classList.remove("active");
            languageMenu?.classList.remove("active");
            sideOverlay.classList.remove("active");
        });
    }

    if (openLanguageBtn) {
        openLanguageBtn.addEventListener("click", () => {
            sideMenu?.classList.remove("active");
            languageMenu?.classList.add("active");
        });
    }

    if (backToMenuBtn) {
        backToMenuBtn.addEventListener("click", () => {
            languageMenu?.classList.remove("active");
            sideMenu?.classList.add("active");
        });
    }

    if (backContainerBtn) {
        backContainerBtn.addEventListener("click", () => {
            
            // Slide container left
            container.classList.add("slide-left");

            // Close side menu
            sideMenu.classList.remove("active");
            sideOverlay.classList.remove("active");

            // Reset slide after animation
            setTimeout(() => {
                container.classList.remove("slide-left");
            }, 350);
        });
    }

    /* ==================
   FOODCOURT PAGE LOGIC
=====================*/
const API_BASE = "https://foodpulse-backend.onrender.com/api";
const foodcourtGrid = document.querySelector(".foodcourt-grid");

if (foodcourtGrid) {
    const foodcourtCards = document.querySelectorAll(".foodcourt-card");
    const fcInfoPanel = document.getElementById("fc-info-panel");
    const fcTitle = document.getElementById("fc-title");
    const stallList = document.querySelector(".stall-list");
    const timeButtons = document.querySelectorAll(".time-buttons button");
    const closeBtn = document.getElementById("closeFcPanel");

    let activeCard = null;
    let activeFoodCourt = null;
    let activeTimePeriod = "10am-12pm";

    /* ==================
       UPDATE STALL LIST
    ===================*/
    async function updateStallList(fcName, timePeriod) {
        const fcStalls = fcData[fcName].stalls;
        const fcDesc = fcData[fcName].descriptions;
        const defaultPercent = fcData[fcName].times[timePeriod];

        let finalPercent = [...defaultPercent];

        try {
            const res = await fetch(
                `${API_BASE}/availability?foodCourt=${encodeURIComponent(fcName)}&timePeriod=${encodeURIComponent(timePeriod)}`
            );
            const liveData = await res.json();

            liveData.forEach(live => {
                const index = fcStalls.findIndex(
                    s => s.toLowerCase().includes(live.stall.toLowerCase())
                );
                if (index !== -1) {
                    finalPercent[index] = live.percentage;
                }
            });
        } catch (e) {
            console.warn("Using default data");
        }

        stallList.innerHTML = "";
        fcStalls.forEach((stall, i) => {
            const translatedStall =
                translations[currentLang].stallNames?.[stall] || stall;
            const desc = fcDesc[currentLang][i] || "";
            const percent = finalPercent[i] || 0;

            stallList.innerHTML += `
                <li>
                    <span>${translatedStall}</span>
                    <span class="percent-text">${percent}%</span>
                    ${desc ? `<small>${desc}</small>` : ""}
                    <div class="bar">
                        <div class="bar-fill" style="width:${percent}%"></div>
                    </div>
                </li>
            `;
        });
    }

    /* ==================
       CLOSE PANEL
    ===================*/
    function closePanel(isRight) {
        fcInfoPanel.classList.remove("show-left", "show-right");
        fcInfoPanel.classList.add(isRight ? "off-right" : "off-left");
        activeCard = null;
    }

    /* ==================
       CARD CLICK
    ===================*/
    foodcourtCards.forEach(card => {
        card.addEventListener("click", () => {
            const fcName = card.dataset.fc;
            const isRight = parseInt(fcName.match(/\d+/)[0]) % 2 === 1;

            if (activeCard === card) {
                closePanel(isRight);
                return;
            }

            activeFoodCourt = fcName;
            activeTimePeriod = "10am-12pm";

            fcInfoPanel.classList.remove("off-left", "off-right");
            fcInfoPanel.classList.add(isRight ? "show-right" : "show-left");

            const translatedFc =
                translations[currentLang].foodCourtNames?.[fcName] || fcName;
            fcTitle.innerText = translatedFc;

            updateStallList(fcName, activeTimePeriod);

            timeButtons.forEach(btn => {
                btn.classList.remove("active");
                if (btn.dataset.time === activeTimePeriod) {
                    btn.classList.add("active");
                }

                btn.onclick = () => {
                    activeTimePeriod = btn.dataset.time;
                    timeButtons.forEach(b => b.classList.remove("active"));
                    btn.classList.add("active");
                    updateStallList(fcName, activeTimePeriod);
                };
            });

            activeCard = card;
        });
    });

    /* ==================
       BACK BUTTON
    ===================*/
    closeBtn.addEventListener("click", () => {
        if (!activeFoodCourt) return;
        const isRight = parseInt(activeFoodCourt.match(/\d+/)[0]) % 2 === 1;
        closePanel(isRight);
    });
}

    let currentLang = localStorage.getItem("lang") || "en";
    applyLanguage(currentLang);

    const sideRegisterBtn = document.getElementById("sideRegisterBtn");
    const sideLoginBtn = document.getElementById("sideLoginBtn");

    document.querySelectorAll(".language-menu .side-btn[data-lang]")
    .forEach(btn => {
        btn.addEventListener("click", () => {
            applyLanguage(btn.dataset.lang);
            languageMenu?.classList.remove("active");
            sideOverlay?.classList.remove("active");
        });
    });

    if (sideRegisterBtn) {
        sideRegisterBtn.addEventListener("click", () => {
            sideMenu?.classList.remove("active");
            sideOverlay?.classList.remove("active");
            document.getElementById("vendorModal").style.display = "flex";
            showRegisterMode();
        });
    }

    if (sideLoginBtn) {
        sideLoginBtn.addEventListener("click", () => {
            sideMenu?.classList.remove("active");
            sideOverlay?.classList.remove("active");
            document.getElementById("vendorModal").style.display = "flex";
            showLoginMode();
        });
    }

    /* =========================
       SCHEDULE PAGE LOGIC
    ========================== */

    // Define the rest of the schedule page logic
    const calendarGrid = document.getElementById("calendarGrid");
    const infoPanel = document.getElementById("infoPanel");
    const monthTitle = document.getElementById("monthTitle");

    if (!calendarGrid) return; // prevents JS crash on index page

    function getLocalDateKey(date) {
        const y = date.getFullYear();
        const m = String(date.getMonth() + 1).padStart(2, "0");
        const d = String(date.getDate()).padStart(2, "0");
        return `${y}-${m}-${d}`;
    }

    let currentMonth = 0; // January
    let currentYear = 2026;

    // Updated events object: Now uses translation keys instead of hardcoded strings
    const events = {
    // ===== JANUARY =====
    "2026-01-01": {
        level: "low",
        titleKey: "vacation",
        textKey: "vacationJan"
    },
    "2026-01-02": {
        level: "low",
        titleKey: "vacation",
        textKey: "vacationJan"
    },
    "2026-01-03": {
        level: "low",
        titleKey: "vacation",
        textKey: "vacationJan"
    },
    "2026-01-04": {
        level: "low",
        titleKey: "vacation",
        textKey: "vacationJan"
    },
    "2026-01-05": {
        level: "high",
        titleKey: "firstDaySemester",
        textKey: "firstDayText"
    },
    "2026-01-08": {
        level: "high",
        titleKey: "openHouse",
        textKey: "openHouseText"
    },
    "2026-01-09": {
        level: "high",
        titleKey: "openHouse",
        textKey: "openHouseText"
    },
    "2026-01-10": {
        level: "high",
        titleKey: "openHouse",
        textKey: "openHouseText"
    },
    "2026-01-14": {
        level: "high",
        titleKey: "oLevelResults",
        textKey: "oLevelText"
    },
    "2026-01-26": {
        level: "high",
        titleKey: "examTimetable",
        textKey: "examTimetableText"
    },
    // ===== FEBRUARY =====
    "2026-02-07": {
        level: "high",
        titleKey: "abecEvent",
        textKey: "abecText"
    },
    "2026-02-09": {
        level: "high",
        titleKey: "finalExamSeats",
        textKey: "finalExamSeatsText"
    },
    "2026-02-13": {
        level: "high",
        titleKey: "decisionDeadline",
        textKey: "decisionDeadlineText"
    },
    "2026-02-16": {
        level: "low",
        titleKey: "cnyEve",
        textKey: "cnyEveText"
    },
    "2026-02-17": {
        level: "low",
        titleKey: "cny",
        textKey: "cnyText"
    },
    "2026-02-18": {
        level: "low",
        titleKey: "cny",
        textKey: "cnyText"
    },
    "2026-02-19": {
        level: "high",
        titleKey: "academicDay",
        textKey: "studyWeek"
    },
    "2026-02-20": {
        level: "high",
        titleKey: "academicDay",
        textKey: "studyWeek"
    },
    "2026-02-21": {
        level: "high",
        titleKey: "academicDay",
        textKey: "studyWeek"
    },
    "2026-02-22": {
        level: "high",
        titleKey: "academicDay",
        textKey: "studyWeek"
    },
    "2026-02-25": {
        level: "low",
        titleKey: "academicDay",
        textKey: "aLevelResults"
    },
    "2026-02-26": {
        level: "high",
        titleKey: "examsBegin",
        textKey: "examsBeginText"
    },
    "2026-02-27": {
        level: "low",
        titleKey: "academicDay",
        textKey: "aLevelResults"
    },
    // ===== MARCH =====
    "2026-03-01": {
        level: "high",
        titleKey: "muggingPeriod",
        textKey: "muggingPeriodText"
    },
    "2026-03-02": {
        level: "high",
        titleKey: "muggingPeriod",
        textKey: "muggingPeriodText"
    },
    "2026-03-03": {
        level: "high",
        titleKey: "muggingPeriod",
        textKey: "muggingPeriodText"
    },
    "2026-03-04": {
        level: "high",
        titleKey: "muggingPeriod",
        textKey: "muggingPeriodText"
    },
    "2026-03-05": {
        level: "high",
        titleKey: "examsEnd",
        textKey: "examsEndText"
    },
    "2026-03-06": {
        level: "low",
        titleKey: "vacation",
        textKey: "endVacationApr"
    },
    "2026-03-07": {
        level: "low",
        titleKey: "vacation",
        textKey: "endVacationApr"
    },
    "2026-03-08": {
        level: "low",
        titleKey: "vacation",
        textKey: "endVacationApr"
    },
    "2026-03-09": {
        level: "low",
        titleKey: "vacation",
        textKey: "endVacationApr"
    },
    "2026-03-10": {
        level: "high",
        titleKey: "businessPlan",
        textKey: "businessPlanText"
    },
    "2026-03-11": {
        level: "low",
        titleKey: "vacation",
        textKey: "endVacationApr"
    },
    "2026-03-12": {
        level: "low",
        titleKey: "vacation",
        textKey: "endVacationApr"
    },
    "2026-03-13": {
        level: "low",
        titleKey: "vacation",
        textKey: "endVacationApr"
    },
    "2026-03-14": {
        level: "low",
        titleKey: "vacation",
        textKey: "endVacationApr"
    },
    "2026-03-15": {
        level: "low",
        titleKey: "vacation",
        textKey: "endVacationApr"
    },
    "2026-03-16": {
        level: "low",
        titleKey: "internshipBegin",
        textKey: "internshipBeginText"
    },
    "2026-03-17": {
        level: "low",
        titleKey: "vacation",
        textKey: "endVacationApr"
    },
    "2026-03-18": {
        level: "low",
        titleKey: "vacation",
        textKey: "endVacationApr"
    },
    "2026-03-19": {
        level: "low",
        titleKey: "vacation",
        textKey: "endVacationApr"
    },
    "2026-03-20": {
        level: "low",
        titleKey: "vacation",
        textKey: "endVacationApr"
    },
    "2026-03-21": {
        level: "low",
        titleKey: "hariRayaPuasa",
        textKey: "hariRayaPuasaText"
    },
    "2026-03-22": {
        level: "low",
        titleKey: "vacation",
        textKey: "endVacationApr"
    },
    "2026-03-23": {
        level: "medium",
        titleKey: "resultRelease",
        textKey: "resultReleaseText"
    },
    "2026-03-24": {
        level: "low",
        titleKey: "vacation",
        textKey: "endVacationApr"
    },
    "2026-03-25": {
        level: "low",
        titleKey: "vacation",
        textKey: "endVacationApr"
    },
    "2026-03-26": {
        level: "low",
        titleKey: "vacation",
        textKey: "endVacationApr"
    },
    "2026-03-27": {
        level: "low",
        titleKey: "vacation",
        textKey: "endVacationApr"
    },
    "2026-03-28": {
        level: "low",
        titleKey: "vacation",
        textKey: "endVacationApr"
    },
    "2026-03-29": {
        level: "low",
        titleKey: "vacation",
        textKey: "endVacationApr"
    },
    "2026-03-30": {
        level: "low",
        titleKey: "vacation",
        textKey: "endVacationApr"
    },
    "2026-03-31": {
        level: "low",
        titleKey: "vacation",
        textKey: "endVacationApr"
    },
    // ===== APRIL =====
    "2026-04-01": {
        level: "low",
        titleKey: "vacation",
        textKey: "endVacationApr"
    },
    "2026-04-02": {
        level: "low",
        titleKey: "vacation",
        textKey: "endVacationApr"
    },
    "2026-04-03": {
        level: "low",
        titleKey: "goodFriday",
        textKey: "goodFridayText"
    },
    "2026-04-04": {
        level: "low",
        titleKey: "vacation",
        textKey: "endVacationApr"
    },
    "2026-04-05": {
        level: "low",
        titleKey: "vacation",
        textKey: "endVacationApr"
    },
    "2026-04-06": {
        level: "low",
        titleKey: "timetableRelease",
        textKey: "timetableReleaseText"
    },
    "2026-04-07": {
        level: "low",
        titleKey: "vacation",
        textKey: "endVacationApr"
    },
    "2026-04-08": {
        level: "low",
        titleKey: "vacation",
        textKey: "endVacationApr"
    },
    "2026-04-09": {
        level: "low",
        titleKey: "vacation",
        textKey: "endVacationApr"
    },
    "2026-04-10": {
        level: "low",
        titleKey: "vacation",
        textKey: "endVacationApr"
    },
    "2026-04-11": {
        level: "low",
        titleKey: "vacation",
        textKey: "endVacationApr"
    },
    "2026-04-12": {
        level: "low",
        titleKey: "vacation",
        textKey: "endVacationApr"
    },
    "2026-04-13": {
        level: "high",
        titleKey: "fop",
        textKey: "fopText"
    },
    "2026-04-14": {
        level: "high",
        titleKey: "fop",
        textKey: "fopText"
    },
    "2026-04-15": {
        level: "high",
        titleKey: "fop",
        textKey: "fopText"
    },
    "2026-04-16": {
        level: "high",
        titleKey: "fop",
        textKey: "fopText"
    },
    "2026-04-17": {
        level: "high",
        titleKey: "fop",
        textKey: "fopText"
    },
    "2026-04-18": {
        level: "low",
        titleKey: "vacation",
        textKey: "endVacationApr"
    },
    "2026-04-19": {
        level: "low",
        titleKey: "vacation",
        textKey: "endVacationApr"
    },
    "2026-04-20": {
        level: "high",
        titleKey: "term1Begin",
        textKey: "term1BeginText"
    },
    "2026-04-21": {
        level: "high",
        titleKey: "term2",
        textKey: "term1ClassesBegin"
    },
    "2026-04-22": {
        level: "high",
        titleKey: "term2",
        textKey: "term1ClassesBegin"
    },
    "2026-04-23": {
        level: "high",
        titleKey: "term2",
        textKey: "term1ClassesBegin"
    },
    "2026-04-24": {
        level: "high",
        titleKey: "term2",
        textKey: "term1ClassesBegin"
    },
    "2026-04-25": {
        level: "high",
        titleKey: "term2",
        textKey: "term1ClassesBegin"
    },
    "2026-04-26": {
        level: "high",
        titleKey: "term2",
        textKey: "term1ClassesBegin"
    },
    "2026-04-27": {
        level: "high",
        titleKey: "term2",
        textKey: "term1ClassesBegin"
    },
    "2026-04-28": {
        level: "high",
        titleKey: "term2",
        textKey: "term1ClassesBegin"
    },
    "2026-04-29": {
        level: "high",
        titleKey: "term2",
        textKey: "term1ClassesBegin"
    },
    "2026-04-30": {
        level: "high",
        titleKey: "term2",
        textKey: "term1ClassesBegin"
    },
    // ===== MAY =====
    "2026-05-01": {
        level: "low",
        titleKey: "labourDay",
        textKey: "labourDayText"
    },
    "2026-05-02": {
        level: "high",
        titleKey: "term2Begin",
        textKey: "term2BeginText"
    },
    "2026-05-03": {
        level: "high",
        titleKey: "term2Begin",
        textKey: "term2BeginText"
    },
    "2026-05-04": {
        level: "high",
        titleKey: "graduation",
        textKey: "graduationText"
    },
    "2026-05-05": {
        level: "high",
        titleKey: "graduation",
        textKey: "graduationText"
    },
    "2026-05-06": {
        level: "high",
        titleKey: "graduation",
        textKey: "graduationText"
    },
    "2026-05-07": {
        level: "high",
        titleKey: "graduation",
        textKey: "graduationText"
    },
    "2026-05-08": {
        level: "high",
        titleKey: "graduation",
        textKey: "graduationText"
    },
    "2026-05-09": {
        level: "high",
        titleKey: "term2Begin",
        textKey: "term2BeginText"
    },
    "2026-05-10": {
        level: "high",
        titleKey: "term2Begin",
        textKey: "term2BeginText"
    },
    "2026-05-11": {
        level: "high",
        titleKey: "projectCrunch",
        textKey: "projectCrunchText"
    },
    "2026-05-12": {
        level: "high",
        titleKey: "projectCrunch",
        textKey: "projectCrunchText"
    },
    "2026-05-13": {
        level: "high",
        titleKey: "projectCrunch",
        textKey: "projectCrunchText"
    },
    "2026-05-14": {
        level: "high",
        titleKey: "projectCrunch",
        textKey: "projectCrunchText"
    },
    "2026-05-15": {
        level: "high",
        titleKey: "projectCrunch",
        textKey: "projectCrunchText"
    },
    "2026-05-16": {
        level: "high",
        titleKey: "projectCrunch",
        textKey: "projectCrunchText"
    },
    "2026-05-17": {
        level: "high",
        titleKey: "projectCrunch",
        textKey: "projectCrunchText"
    },
    "2026-05-18": {
        level: "high",
        titleKey: "projectCrunch",
        textKey: "projectCrunchText"
    },
    "2026-05-19": {
        level: "high",
        titleKey: "projectCrunch",
        textKey: "projectCrunchText"
    },
    "2026-05-20": {
        level: "high",
        titleKey: "projectCrunch",
        textKey: "projectCrunchText"
    },
    "2026-05-21": {
        level: "high",
        titleKey: "projectCrunch",
        textKey: "projectCrunchText"
    },
    "2026-05-22": {
        level: "high",
        titleKey: "projectCrunch",
        textKey: "projectCrunchText"
    },
    "2026-05-23": {
        level: "high",
        titleKey: "term2Begin",
        textKey: "term2BeginText"
    },
    "2026-05-24": {
        level: "high",
        titleKey: "term2Begin",
        textKey: "term2BeginText"
    },
    "2026-05-25": {
        level: "high",
        titleKey: "term2Begin",
        textKey: "term2BeginText"
    },
    "2026-05-26": {
        level: "medium",
        titleKey: "excellenceAwards",
        textKey: "excellenceAwardsText"
    },
    "2026-05-27": {
        level: "low",
        titleKey: "hariRayaHaji",
        textKey: "hariRayaHajiText"
    },
    "2026-05-28": {
        level: "high",
        titleKey: "preTestRevision",
        textKey: "preTestRevisionText"
    },
    "2026-05-29": {
        level: "high",
        titleKey: "preTestRevision",
        textKey: "preTestRevisionText"
    },
    "2026-05-30": {
        level: "high",
        titleKey: "term2Begin",
        textKey: "term2BeginText"
    },
    "2026-05-31": {
        level: "low",
        titleKey: "vesakDay",
        textKey: "vesakDayText"
    },
    // ===== JUNE =====
    "2026-06-01": {
        level: "low",
        titleKey: "vesakDay",
        textKey: "vesakDayText"
    },
    "2026-06-02": {
        level: "high",
        titleKey: "midSemesterTests",
        textKey: "midSemesterTestsText"
    },
    "2026-06-03": {
        level: "high",
        titleKey: "midSemesterTests",
        textKey: "midSemesterTestsText"
    },
    "2026-06-04": {
        level: "high",
        titleKey: "midSemesterTests",
        textKey: "midSemesterTestsText"
    },
    "2026-06-05": {
        level: "high",
        titleKey: "midSemesterTests",
        textKey: "midSemesterTestsText"
    },
    "2026-06-06": {
        level: "low",
        titleKey: "midVacation",
        textKey: "midSemesterVacation"
    },
    "2026-06-07": {
        level: "low",
        titleKey: "midVacation",
        textKey: "midSemesterVacation"
    },
    "2026-06-08": {
        level: "low",
        titleKey: "midVacation",
        textKey: "midSemesterVacation"
    },
    "2026-06-09": {
        level: "low",
        titleKey: "midVacation",
        textKey: "midSemesterVacation"
    },
    "2026-06-10": {
        level: "low",
        titleKey: "midVacation",
        textKey: "midSemesterVacation"
    },
    "2026-06-11": {
        level: "low",
        titleKey: "midVacation",
        textKey: "midSemesterVacation"
    },
    "2026-06-12": {
        level: "low",
        titleKey: "midVacation",
        textKey: "midSemesterVacation"
    },
    "2026-06-13": {
        level: "low",
        titleKey: "midVacation",
        textKey: "midSemesterVacation"
    },
    "2026-06-14": {
        level: "low",
        titleKey: "midVacation",
        textKey: "midSemesterVacation"
    },
    "2026-06-15": {
        level: "low",
        titleKey: "goEcoWeek",
        textKey: "goEcoWeekText"
    },
    "2026-06-16": {
        level: "low",
        titleKey: "goEcoWeek",
        textKey: "goEcoWeekText"
    },
    "2026-06-17": {
        level: "low",
        titleKey: "goEcoWeek",
        textKey: "goEcoWeekText"
    },
    "2026-06-18": {
        level: "low",
        titleKey: "goEcoWeek",
        textKey: "goEcoWeekText"
    },
    "2026-06-19": {
        level: "low",
        titleKey: "goEcoWeek",
        textKey: "goEcoWeekText"
    },
    "2026-06-20": {
        level: "low",
        titleKey: "midVacation",
        textKey: "midSemesterVacation"
    },
    "2026-06-21": {
        level: "low",
        titleKey: "midVacation",
        textKey: "midSemesterVacation"
    },
    "2026-06-22": {
        level: "low",
        titleKey: "midVacation",
        textKey: "midSemesterVacation"
    },
    "2026-06-23": {
        level: "low",
        titleKey: "midVacation",
        textKey: "midSemesterVacation"
    },
    "2026-06-24": {
        level: "low",
        titleKey: "midVacation",
        textKey: "midSemesterVacation"
    },
    "2026-06-25": {
        level: "low",
        titleKey: "midVacation",
        textKey: "midSemesterVacation"
    },
    "2026-06-26": {
        level: "low",
        titleKey: "midVacation",
        textKey: "midSemesterVacation"
    },
    "2026-06-27": {
        level: "low",
        titleKey: "midVacation",
        textKey: "midSemesterVacation"
    },
    "2026-06-28": {
        level: "low",
        titleKey: "midVacation",
        textKey: "midSemesterVacation"
    },
    "2026-06-29": {
        level: "medium",
        titleKey: "term2Begin",
        textKey: "term2BeginText"
    },
    "2026-06-30": {
        level: "medium",
        titleKey: "term2",
        textKey: "term2ClassesBegin"
    }
};

    function isBetween(date, start, end) {
        return date >= new Date(start) && date <= new Date(end);
    }
    
    function getCrowdLevel(date) {
        const key = getLocalDateKey(date);
        
        // Specific event override
        if (events[key]) return events[key].level;

        // Vacation periods → GREEN
        if (
            isBetween(date, "2025-12-13", "2026-01-04") ||
            isBetween(date, "2026-03-07", "2026-04-19")
        ) return "low";

        // Examination period → GREEN
        if (isBetween(date, "2026-02-23", "2026-03-06")) return "low";

        // Home-based learning → GREEN
        if (key === "2026-01-08" || key === "2026-01-09") return "high";

        // Chinese New Year (Green / Low)
        if (isBetweenLocal(date, "2026-02-16", "2026-02-18")) return "low";

        // Study Week & Mugging Period (Red)
        if (isBetweenLocal(date, "2026-02-16", "2026-02-22")) return "high";

        // A-Level Results Release window (Red)
        if (isBetweenLocal(date, "2026-02-25", "2026-02-27")) return "high";

        // Mugging & Final Exams (Mar 1–5)
        if (isBetweenLocal(date, "2026-03-01", "2026-03-05")) return "high";

        // End of Vacation (Apr 1–12)
        if (isBetweenLocal(date, "2026-04-01", "2026-04-12")) return "low";

        // Freshmen Orientation Programme (Apr 13–17)
        if (isBetweenLocal(date, "2026-04-13", "2026-04-17")) return "high";

        // Labour Day – May 1
        if (key === "2026-05-01") return "low";

        // Graduation Ceremonies – May 4–8
        if (isBetweenLocal(date, "2026-05-04", "2026-05-08")) return "high";

        // Project & Assignment Crunch – May 11–22
        if (isBetweenLocal(date, "2026-05-11", "2026-05-22")) return "high";

        // SP Excellence Awards – May 26
        if (key === "2026-05-26") return "medium";

        // Hari Raya Haji – May 27
        if (key === "2026-05-27") return "low";

        // Pre-Test Revision Days – May 28–29
        if (isBetweenLocal(date, "2026-05-28", "2026-05-29")) return "high";

        // Vesak Day – May 31
        if (key === "2026-05-31") return "low";

        // Vesak Day (In Lieu) – June 1
        if (key === "2026-06-01") return "low";
        
        // Mid-Semester Tests (June 2–5)
        if (isBetweenLocal(date, "2026-06-02", "2026-06-05")) return "high";

        // Mid-Semester Vacation (Phase 1) June 6–21 → GREEN
        if (isBetweenLocal(date, "2026-06-06", "2026-06-21")) return "low";

        // "Go Eco" Week – June 15–19 → GREEN
        if (isBetweenLocal(date, "2026-06-15", "2026-06-19")) return "low";

        // Mid-Semester Vacation (Phase 2) June 22–28 → GREEN
        if (isBetweenLocal(date, "2026-06-22", "2026-06-28")) return "low";

        // Term 2 Classes Begin – June 29
        if (key === "2026-06-29") return "medium";

        // Term 1 general period (Apr 20 onwards) → RED
        // Put at the END so it doesn't override May/June vacations
        if (date >= new Date("2026-04-20") && date <= new Date("2026-05-31")) return "high";

        // Weekend → WHITE
        const day = date.getDay();
        if (day === 0 || day === 6) return "weekend";

        // Normal school day → YELLOW
        return "medium";
    }

    function isBetweenLocal(date, start, end) {
        const key = getLocalDateKey(date);
        return key >= start && key <= end;
    }

    // Define generateCalendar BEFORE calling applyLanguage
    function generateCalendar() {
        calendarGrid.innerHTML = "";

        const days = translations[currentLang].days;
        days.forEach(d => {
            const div = document.createElement("div");
            div.className = "day-header";
            div.innerText = d;
            calendarGrid.appendChild(div);
        });

        const firstDay = new Date(currentYear, currentMonth, 1).getDay();
        const totalDays = new Date(currentYear, currentMonth + 1, 0).getDate();

        for (let i = 0; i < firstDay; i++) {
            calendarGrid.appendChild(document.createElement("div"));
        }

        for (let day = 1; day <= totalDays; day++) {
            const date = new Date(currentYear, currentMonth, day);
            const dateKey = getLocalDateKey(date);

            const div = document.createElement("div");
            div.className = "day";

            const level = getCrowdLevel(date);
            div.classList.add(level);

            div.innerText = day;

            div.onclick = () => {
                const key = getLocalDateKey(date);

                // Default
                let title = infoTranslations[currentLang]?.academicDay || infoTranslations.en.academicDay;
                let text = infoTranslations[currentLang]?.selectDate || infoTranslations.en.selectDate;

                // Vacation explanation (Jan 1–4)
                if (isBetweenLocal(date, "2026-01-01", "2026-01-04")) {
                    title = infoTranslations[currentLang]?.vacation || infoTranslations.en.vacation;
                    text = infoTranslations[currentLang]?.vacationJan || infoTranslations.en.vacationJan;
                }

                // Study Week (Feb 16–22, including Feb 19-22 as described)
                if (isBetweenLocal(date, "2026-02-16", "2026-02-22")) {
                    title = infoTranslations[currentLang]?.academicDay || infoTranslations.en.academicDay;
                    text = infoTranslations[currentLang]?.studyWeek || infoTranslations.en.studyWeek;
                }

                // A-Level Results Release window (Feb 25)
                if (isBetweenLocal(date, "2026-02-25", "2026-02-27")) {
                    title = infoTranslations[currentLang]?.academicDay || infoTranslations.en.academicDay;
                    text = infoTranslations[currentLang]?.aLevelResults || infoTranslations.en.aLevelResults;
                }

                // Final Exams & Mugging Period (Mar 1–5)
                if (isBetweenLocal(date, "2026-03-01", "2026-03-05")) {
                    title = infoTranslations[currentLang]?.midTests || infoTranslations.en.midTests;
                    text = infoTranslations[currentLang]?.finalExamsMugging || infoTranslations.en.finalExamsMugging;
                }

                // Vacation Ghost Town (Mar 6–31, including Apr 18-19 as described)
                if (isBetweenLocal(date, "2026-03-06", "2026-04-19")) {  // Adjusted start to Mar 6 to match "Mar 6-31"
                    title = infoTranslations[currentLang]?.vacation || infoTranslations.en.vacation;
                    text = infoTranslations[currentLang]?.vacationGhostTown || infoTranslations.en.vacationGhostTown;
                }

                // End of Vacation (Apr 1–12)
                if (isBetweenLocal(date, "2026-04-01", "2026-04-12")) {
                    title = infoTranslations[currentLang]?.vacation || infoTranslations.en.vacation;
                    text = infoTranslations[currentLang]?.endVacationApr || infoTranslations.en.endVacationApr;
                }

                // Freshmen Orientation Programme (Apr 13–17)
                if (isBetweenLocal(date, "2026-04-13", "2026-04-17")) {
                    title = infoTranslations[currentLang]?.academicDay || infoTranslations.en.academicDay;
                    text = infoTranslations[currentLang]?.fopOrientation || infoTranslations.en.fopOrientation;
                }

                // Term 1 Classes Begin (Apr 20 onwards, including Apr 21-30 as described)
                if (date >= new Date("2026-04-20")) {
                    title = infoTranslations[currentLang]?.term2 || infoTranslations.en.term2;
                    text = infoTranslations[currentLang]?.term1ClassesBegin || infoTranslations.en.term1ClassesBegin;
                }

                // Labour Day – May 1
                if (key === "2026-05-01") {
                    title = infoTranslations[currentLang]?.vacation || infoTranslations.en.vacation;
                    text = infoTranslations[currentLang]?.labourDayText || infoTranslations.en.labourDayText;
                }

                // Graduation Ceremonies (May 4–8)
                if (isBetweenLocal(date, "2026-05-04", "2026-05-08")) {
                    title = infoTranslations[currentLang]?.academicDay || infoTranslations.en.academicDay;
                    text = infoTranslations[currentLang]?.graduationText || infoTranslations.en.graduationText;
                }

                // Project & Assignment Crunch (May 11–22)
                if (isBetweenLocal(date, "2026-05-11", "2026-05-22")) {
                    title = infoTranslations[currentLang]?.academicDay || infoTranslations.en.academicDay;
                    text = infoTranslations[currentLang]?.projectCrunchText || infoTranslations.en.projectCrunchText;
                }

                // SP Excellence Awards (May 26)
                if (key === "2026-05-26") {
                    title = infoTranslations[currentLang]?.academicDay || infoTranslations.en.academicDay;
                    text = infoTranslations[currentLang]?.excellenceAwardsText || infoTranslations.en.excellenceAwardsText;
                }

                // Hari Raya Haji (May 27)
                if (key === "2026-05-27") {
                    title = infoTranslations[currentLang]?.vacation || infoTranslations.en.vacation;
                    text = infoTranslations[currentLang]?.hariRayaHajiText || infoTranslations.en.hariRayaHajiText;
                }

                // Pre-Test Revision Days (May 28–29)
                if (isBetweenLocal(date, "2026-05-28", "2026-05-29")) {
                    title = infoTranslations[currentLang]?.midTests || infoTranslations.en.midTests;
                    text = infoTranslations[currentLang]?.preTestRevisionText || infoTranslations.en.preTestRevisionText;
                }

                // Vesak Day (May 31 & June 1)
                if (key === "2026-05-31" || key === "2026-06-01") {
                    title = infoTranslations[currentLang]?.vacation || infoTranslations.en.vacation;
                    text = infoTranslations[currentLang]?.vesakDayText || infoTranslations.en.vesakDayText;
                }

                // Mid-Semester Tests (June 2–5)
                if (isBetweenLocal(date, "2026-06-02", "2026-06-05")) {
                    title = infoTranslations[currentLang]?.midTests || infoTranslations.en.midTests;
                    text = infoTranslations[currentLang]?.midSemesterTestsText || infoTranslations.en.midSemesterTestsText;
                }

                // Mid-Semester Vacation (June 6–28, including the "very low activity" text)
                if (isBetweenLocal(date, "2026-06-06", "2026-06-28")) {
                    title = infoTranslations[currentLang]?.midVacation || infoTranslations.en.midVacation;
                    text = infoTranslations[currentLang]?.midSemesterVacation || infoTranslations.en.midSemesterVacation;
                }

                // Term 2 Classes Begin (June 29)
                if (key === "2026-06-29") {
                    title = infoTranslations[currentLang]?.term2 || infoTranslations.en.term2;
                    text = infoTranslations[currentLang]?.term2ClassesBegin || infoTranslations.en.term2ClassesBegin;
                }

                // Override with custom events if exists
                if (events[key]) {
                    title = infoTranslations[currentLang]?.[events[key].titleKey] || infoTranslations.en[events[key].titleKey];
                    text = infoTranslations[currentLang]?.[events[key].textKey] || infoTranslations.en[events[key].textKey];
                }

                document.getElementById("infoDate").innerText = date.toDateString();
                document.getElementById("infoTitle").innerHTML = `<strong>${title}</strong>`;
                document.getElementById("infoText").innerText = text;
            };

            calendarGrid.appendChild(div);
        }

        monthTitle.innerText = new Date(currentYear, currentMonth)
            .toLocaleString("default", { month: "long", year: "numeric" });
    }

    window.changeMonth = function (dir) {
        currentMonth += dir;

        if (currentMonth < 0) {
            currentMonth = 11;
            currentYear--;
        } else if (currentMonth > 11) {
            currentMonth = 0;
            currentYear++;
        }

        generateCalendar();
    };
    generateCalendar();
});

